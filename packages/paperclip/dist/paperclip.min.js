var paperclip=function(e){"use strict";function t(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}const n=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var r;!function(e){e[e.STRING=0]="STRING",e[e.BLOCK=1]="BLOCK",e[e.STRING_BLOCK=2]="STRING_BLOCK",e[e.ELEMENT=3]="ELEMENT",e[e.SELF_CLOSING_ELEMENT=4]="SELF_CLOSING_ELEMENT",e[e.TEXT_NODE=5]="TEXT_NODE",e[e.COMMENT=6]="COMMENT",e[e.ATTRIBUTE=7]="ATTRIBUTE",e[e.START_TAG=8]="START_TAG",e[e.BLOCK_STRING=9]="BLOCK_STRING",e[e.FRAGMENT=10]="FRAGMENT",e[e.END_TAG=11]="END_TAG"}(r||(r={}));var u;!function(e){e[e.TYPE=0]="TYPE",e[e.ECHO=1]="ECHO",e[e.IF=2]="IF",e[e.NUMBER=3]="NUMBER",e[e.PROPERTY=4]="PROPERTY",e[e.RESERVED_KEYWORD=5]="RESERVED_KEYWORD",e[e.ELSEIF=6]="ELSEIF",e[e.NOT=7]="NOT",e[e.OPERATION=8]="OPERATION",e[e.GROUP=9]="GROUP",e[e.REFERENCE=10]="REFERENCE",e[e.ELSE=11]="ELSE",e[e.REPEAT=12]="REPEAT"}(u||(u={}));var o,a=function(e){return e.type==r.SELF_CLOSING_ELEMENT?[]:e.childNodes},i=function(e){return e.type==r.SELF_CLOSING_ELEMENT?e.name:e.startTag.name},c=function(e){return e.value.value},s=function(e){return f(e).attributes},l=function(e){return f(e).modifiers},E=function(e){return e.type===r.ELEMENT||e.type===r.ELEMENT||e.type===r.START_TAG||e.type===r.END_TAG},p=function(e,t,n){if(void 0===n&&(n=[]),!1===t(e,n))return!1;if(e.childNodes)for(var r=e,u=0,o=r.childNodes.length;u<o;u++){var a=r.childNodes[u];if(!1===p(a,t,n.concat(["childNodes",u])))return!1}},f=function(e){return e.type===r.ELEMENT?e.startTag:e},d=function(e,t){return f(e).modifiers.find(function(e){return e.type===t})},T=function(e,t){var n;return p(t,function(t,r){if(t===e)return n=r,!1}),n},v=function(e,t){var n=[];return p(e,function(e){t(e)&&n.push(e)}),n},h=function(e,t){return v(e,function(e){return e.childNodes&&e.childNodes.find(function(e){return e===t||t.type===r.START_TAG&&e.type===r.ELEMENT&&e.startTag===t})})[0]},N=function(e,t,n){return{type:e,pos:t,value:n}},_={},A=function(e){if(_[e])return _[e];var t=1,n=0,r={};return(e+" ").split("").forEach(function(e,u){r[u]=[n,t],"\n"===e&&(n=0,t++),n++}),_[e]=r},R=function(e,t){var n="number"==typeof e?e:e.pos,r=A(t)[n];return{column:r[0],line:r[1],pos:n}},S=function(e,t,n){return{start:e.line?e:R(e,n),end:t&&t.line?t:R(n.length,n)}},y=function(){function e(e){this._target=e,this.pos=0,this.length=e.length}return e.prototype.curr=function(){return this._target[this.pos]},e.prototype.shift=function(){var e=this._target[this.pos];return this.next(),e},e.prototype.hasNext=function(){return this.pos<this.length-1},e.prototype.next=function(){return this._target[Math.min(this.pos=this.pos+1,this.length)]},e.prototype.prev=function(){return this._target[Math.max(this.pos=this.pos-1,0)]},e.prototype.ended=function(){return this.pos>=this.length},e}(),L=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.scan=function(e){for(var t="";this.pos<this.length;){var n=this._target[this.pos];if(!n.match(e))break;t+=n,this.pos++}return t},n.prototype.peek=function(e){return this._target.substr(this.pos,e)},n.prototype.take=function(e){var t=this._target.substr(this.pos,e);return this.pos+=e,t},n}(y),O=function(e){function n(t,n){var r=e.call(this,n)||this;return r.source=t,r}return t(n,e),n.prototype.peek=function(e){return void 0===e&&(e=1),this._target[this.pos+e]},n.prototype.peekUntil=function(e){for(var t=this.pos;t<this.length-1;)if(e(this._target[++t]))return this._target[t]},n.prototype.curr=function(){return e.prototype.curr.call(this)},n.prototype.next=function(){return e.prototype.next.call(this)},n}(y);!function(e){e[e.LESS_THAN=0]="LESS_THAN",e[e.LESS_THAN_OR_EQUAL=1]="LESS_THAN_OR_EQUAL",e[e.CLOSE_TAG=2]="CLOSE_TAG",e[e.GREATER_THAN=3]="GREATER_THAN",e[e.GREATER_THAN_OR_EQUAL=4]="GREATER_THAN_OR_EQUAL",e[e.COMMENT=5]="COMMENT",e[e.BACKSLASH=6]="BACKSLASH",e[e.BANG=7]="BANG",e[e.AND=8]="AND",e[e.OR=9]="OR",e[e.PLUS=10]="PLUS",e[e.MINUS=11]="MINUS",e[e.STAR=12]="STAR",e[e.PERCENT=13]="PERCENT",e[e.PAREN_OPEN=14]="PAREN_OPEN",e[e.PAREN_CLOSE=15]="PAREN_CLOSE",e[e.DOUBLE_EQUALS=16]="DOUBLE_EQUALS",e[e.TRIPPLE_EQUELS=17]="TRIPPLE_EQUELS",e[e.BRACKET_OPEN=18]="BRACKET_OPEN",e[e.BRACKET_CLOSE=19]="BRACKET_CLOSE",e[e.CURLY_BRACKET_OPEN=20]="CURLY_BRACKET_OPEN",e[e.CURLY_BRACKET_CLOSE=21]="CURLY_BRACKET_CLOSE",e[e.EQUALS=22]="EQUALS",e[e.SINGLE_QUOTE=23]="SINGLE_QUOTE",e[e.DOUBLE_QUOTE=24]="DOUBLE_QUOTE",e[e.TEXT=25]="TEXT",e[e.RESERVED_KEYWORD=26]="RESERVED_KEYWORD",e[e.WHITESPACE=27]="WHITESPACE"}(o||(o={}));var $=function(e){for(var t=new L(e),n=[];!t.ended();){var r=t.curr(),u=void 0;if("<"===r)if("</"===t.peek(2))u=N(o.CLOSE_TAG,t.pos,t.take(2));else if("\x3c!--"===t.peek(4)){for(var a=t.take(4);!t.ended();){var i=t.curr();if("-"===i&&"--\x3e"===t.peek(3)){a+=t.take(3);break}t.next(),a+=i}u=N(o.COMMENT,t.pos,a)}else u="<="===t.peek(2)?N(o.LESS_THAN_OR_EQUAL,t.pos,t.take(2)):N(o.LESS_THAN,t.pos,t.shift());else if("&"===r&&"&&"===t.peek(2))u=N(o.AND,t.pos,t.take(2));else if("|"===r&&"||"===t.peek(2))u=N(o.OR,t.pos,t.take(2));else if(">"===r)u=">="===t.peek(2)?N(o.GREATER_THAN_OR_EQUAL,t.pos,t.take(2)):N(o.GREATER_THAN,t.pos,t.shift());else if("="===r)u="==="===t.peek(3)?N(o.TRIPPLE_EQUELS,t.pos,t.take(3)):"=="===t.peek(2)?N(o.DOUBLE_EQUALS,t.pos,t.take(2)):N(o.EQUALS,t.pos,t.shift());else if("'"===r)u=N(o.SINGLE_QUOTE,t.pos,t.shift());else if("!"===r)u=N(o.BANG,t.pos,t.shift());else if("/"===r)u=N(o.BACKSLASH,t.pos,t.shift());else if('"'===r)u=N(o.DOUBLE_QUOTE,t.pos,t.shift());else if("+"===r)u=N(o.PLUS,t.pos,t.shift());else if("-"===r)u=N(o.MINUS,t.pos,t.shift());else if("*"===r)u=N(o.STAR,t.pos,t.shift());else if("%"===r)u=N(o.PERCENT,t.pos,t.shift());else if("["===r)u=N(o.BRACKET_OPEN,t.pos,t.shift());else if("]"===r)u=N(o.BRACKET_CLOSE,t.pos,t.shift());else if("("===r)u=N(o.PAREN_OPEN,t.pos,t.shift());else if(")"===r)u=N(o.PAREN_CLOSE,t.pos,t.shift());else if("{"===r)u=N(o.CURLY_BRACKET_OPEN,t.pos,t.shift());else if("}"===r)u=N(o.CURLY_BRACKET_CLOSE,t.pos,t.shift());else if(/[\s\r\n\t]/.test(r))u=N(o.WHITESPACE,t.pos,t.scan(/[\s\r\n\t]/));else{var c=t.scan(/[^-<>,='"(){}\[\]\s\r\n\t]/)||t.shift();u=N("undefined"===c?o.RESERVED_KEYWORD:o.TEXT,t.pos,c)}n.push(u)}return new O(e,n)},m={},g=function(e){if(m[e])return m[e];var t=$(e);return m[e]=C(t)},C=function(e){for(var t=[];!e.ended();)t.push(b(e));return 1===t.length?t[0]:{type:r.FRAGMENT,location:S(0,e.source.length,e.source),childNodes:t}},b=function(e){switch(e.curr().type){case o.WHITESPACE:return J(e);case o.SINGLE_QUOTE:case o.DOUBLE_QUOTE:return q(e);case o.LESS_THAN:return Y(e);case o.CLOSE_TAG:return j(e);case o.COMMENT:return F(e);default:return Q(e)?U(e):J(e)}},U=function(e){var t=e.curr();e.next(),e.next(),z(e);var n=x(e);return z(e),e.next(),e.next(),{type:r.BLOCK,location:S(t,e.curr(),e.source),value:n}},x=function(e){switch(e.curr().value){case"bind":return M(e);case"repeat":return K(e);case"if":return V(e,u.IF);case"elseif":return V(e,u.ELSEIF);case"else":return V(e,u.ELSE);case"property":return k(e,u.PROPERTY);default:throw new Error("Unknown block type "+e.curr().value)}},P=function(e){return G(e)},G=function(e){var t=w(e);z(e);var n=e.curr(),r=n.type;if(!(r===o.AND||r===o.OR||r==o.PLUS||r===o.MINUS||r===o.STAR||r===o.BACKSLASH||r===o.DOUBLE_EQUALS||r===o.TRIPPLE_EQUELS||r===o.GREATER_THAN||r===o.LESS_THAN||r===o.LESS_THAN_OR_EQUAL||r===o.GREATER_THAN_OR_EQUAL))return t;e.next(),z(e);var a=G(e);return{type:u.OPERATION,left:t,right:a,operator:n.value,location:S(t.location.start,a.location.end,e.source)}},w=function(e){switch(e.curr().type){case o.BANG:return H(e);case o.PAREN_OPEN:return B(e);case o.TEXT:return D(e);case o.RESERVED_KEYWORD:return I(e);default:throw new Error("Unknown block type "+e.curr().value)}},B=function(e){var t=e.curr();e.next();var n=P(e);return e.next(),{type:u.GROUP,value:n,location:S(t,e.curr(),e.source)}},I=function(e){var t=e.curr();return e.next(),{type:u.RESERVED_KEYWORD,value:t.value,location:S(t,e.curr(),e.source)}},M=function(e){var t=e.curr();return e.next(),e.next(),{type:u.ECHO,value:P(e),location:S(t,e.curr(),e.source)}},k=function(e,t){var n=e.curr();return e.next(),e.next(),{type:t,name:D(e).value,location:S(n,e.curr(),e.source)}},V=function(e,t){var n=e.curr();return e.next(),e.next(),{type:t,condition:P(e),location:S(n,e.curr(),e.source)}},K=function(e){var t=e.curr();e.next();var n=D(e);e.next();var r,o=D(e);return","===e.curr().value&&(e.next(),r=D(e)),{type:u.REPEAT,location:S(t,e.curr(),e.source),each:n,asKey:r,asValue:o}},D=function(e){z(e);var t=e.curr();return e.next(),z(e),{type:u.REFERENCE,value:t.value,location:S(t,e.curr(),e.source)}},H=function(e){var t=e.curr();return e.next(),{type:u.NOT,value:w(e),location:S(t,e.curr(),e.source)}},F=function(e){var t=e.curr();return e.next(),{type:r.COMMENT,value:t.value.substr(4,t.value.length-7),location:S(t,e.curr(),e.source)}},Q=function(e){return e.curr().type===o.BRACKET_OPEN&&e.peek(1).type===o.BRACKET_OPEN},j=function(e){var t=e.curr();e.next();var n=Z(e);return te(e,o.GREATER_THAN),e.next(),{type:r.END_TAG,name:n,location:S(t,e.curr(),e.source)}},Y=function(e){var t=e.curr();te(e,o.LESS_THAN),e.next();for(var n=Z(e),u=[],a=[];!e.ended();){z(e);var i=e.curr();if(i.type===o.BACKSLASH||i.type==o.GREATER_THAN)break;Q(e)?a.push(U(e)):u.push(X(e))}if(e.curr().type===o.BACKSLASH)return e.next(),e.next(),{type:r.SELF_CLOSING_ELEMENT,name:n,attributes:u,modifiers:a,location:S(t,e.curr(),e.source)};e.next();var c=e.curr(),s=W(n,e),l=s[0],E=s[1];return{type:r.ELEMENT,startTag:{name:n,type:r.START_TAG,location:S(t,c,e.source),modifiers:a,attributes:u},childNodes:l,location:S(t,e.curr(),e.source),endTag:E}},W=function(e,t){var n=[];if("style"===e||"script"===e){for(var u="",a=t.curr();!t.ended()&&t.curr().type!==o.CLOSE_TAG;)u+=t.curr().value,t.next();return[[{type:r.TEXT_NODE,value:u,location:S(a,t.curr(),t.source)}],b(t)]}for(var i;!t.ended();){var c=b(t);if(c.type===r.END_TAG){i=c;break}n.push(c)}return[n,i]},X=function(e){var t,n=e.curr(),u=Z(e);return e.curr().type===o.EQUALS&&(e.next(),t=b(e)),{type:r.ATTRIBUTE,name:u,value:t,location:S(n,e.curr(),e.source)}},q=function(e){var t=e.curr(),n=[],u=!1;for(e.next();!e.ended();){var o=e.curr();if(o.type===t.type)break;Q(e)?(u=!0,n.push(U(e))):(e.next(),n.push({type:r.STRING,value:o.value,location:S(o.pos,e.curr(),e.source)}))}e.next();var a=S(t,e.curr(),e.source);return u?{type:r.STRING_BLOCK,location:a,values:n}:{type:r.STRING,location:a,value:n.map(function(e){return e.value}).join("")}},J=function(e){var t=e.curr();e.next();for(var n=t.value;!e.ended();){var u=e.curr();if(u.type===o.COMMENT||u.type===o.LESS_THAN||u.type==o.CLOSE_TAG||Q(e))break;e.next(),n+=u.value}return{type:r.TEXT_NODE,value:n,location:S(t,e.curr(),e.source)}},z=function(e){for(;e.curr().type===o.WHITESPACE;)e.next()},Z=function(e){for(var t="";e.curr().type!==o.WHITESPACE&&e.curr().type!==o.GREATER_THAN&&e.curr().type!==o.EQUALS;)t+=e.curr().value,e.next();return t},ee=function(e,t){if(!t)throw new Error("Unexpected end of file (missing closing expression).");var n=R(t,e);throw new Error('Unexpected token "'+t.value+'" at '+n.line+":"+n.column)},te=function(e,t){var n=e.curr();n&&n.type===t||ee(e.source,e.curr())},ne=function(e){e.curr()||ee(e.source,e.curr())};!function(e){e.TANDEM="TANDEM",e.WEB="WEB"}(e.PaperclipTargetType||(e.PaperclipTargetType={}));var re=Symbol(),ue=function(e){if(e[re]&&e[re][0]===e)return e[re][1];var t=ae(e);return e[re]=[e,t],t},oe=function(e,t,n){return void 0===n&&(n={}),n[e]?Promise.resolve(n):t.readFile(e).then(g).then(ue).then(function(r){return n[e]=r,Promise.all(r.imports.map(function(r){return t.resolveFile(r.href,e).then(function(e){return oe(e,t,n)})}))}).then(function(){return n})},ae=function(e){for(var t=e.type===r.FRAGMENT?e.childNodes:[e],n=[],u=[],o=[],c=[],E=0,p=t.length;E<p;E++){var f=t[E];if(f.type===r.SELF_CLOSING_ELEMENT||f.type===r.ELEMENT){var d=f,T=i(d),v=a(d),h=s(d),N=l(d);if("component"===T){u.push(ie(N,h,v));continue}if("link"===T){n.push(se(h));continue}if("style"===T){o.push(le(h,v));continue}}c.push(f)}return{source:e,imports:n,components:u,globalStyles:o,unhandledExpressions:c}},ie=function(e,t,n){for(var o,l,E,p=e.map(function(e){return e.value}).filter(function(e){return e.type===u.PROPERTY}),f=0,d=t.length;f<d;f++){var T=t[f];"id"===T.name&&(o=c(T))}for(var f=0,d=n.length;f<d;f++){var v=n[f];if(v.type===r.SELF_CLOSING_ELEMENT||v.type===r.ELEMENT){var h=v,N=i(h),_=s(h),A=a(h);"style"===N?l=le(_,A):"template"===N&&(E=ce(_,A))}}return{id:o,style:l,properties:p,template:E}},ce=function(e,t){return{content:t}},se=function(e){for(var t,n,r=0,u=e.length;r<u;r++){var o=e[r];"href"===o.name?t=c(o):"type"===o.name&&(n=c(o))}return{type:n,href:t}},le=function(e,t){return{content:t[0].value}},Ee=function(e,t){return oe(e,t.io).then(function(t){return{code:de(e,t)}})},pe=function(e,t){switch(e.type){case u.NOT:return"!"+pe(e.value,t);case u.REFERENCE:var n=e.value;return t?t+"."+n:n;case u.GROUP:return"("+pe(e.value,t)+")";case u.RESERVED_KEYWORD:return e.value;case u.OPERATION:var r=e,o=r.left,a=r.operator,i=r.right;return pe(o,t)+" "+a+" "+pe(i,t);default:throw new Error("Unable to transpile BK block "+e.type)}},fe=function(e){return e.replace(/[\d-]+/g,"_")},de=function(e,t){var n="((window) => {";n+="const document = window.document;const $$each = (object, iterator) => {if (Array.isArray(object)) {object.forEach(iterator);} else {for (const key in object) {iterator(object[key], key);}}};const $$count = (object) => {return Array.isArray(object) ? object.length : Object.keys(object).length;};const $$defineModule = (deps, run) => {let exports;return () => {if (exports) return exports;exports = {};return exports = run((dep) => $$modules[deps[dep]]());}};let updating = false;let toUpdate = [];const $$requestUpdate = (object) => {if (toUpdate.indexOf(object) === -1) {toUpdate.push(object);}if (updating) {return;}updating = true;requestAnimationFrame(function() {for(let i = 0; i < toUpdate.length; i++) {const target = toUpdate[i];target.update();}toUpdate = [];updating = false;});};",n+="$$modules = {};";for(var r in t)n+='$$modules["'+r+'"] = '+Te(t[r])+";";return n+='return {entryPath: "'+e+'",modules: $$modules};})(window)'},Te=function(e){var t=e.source,n=(e.imports,e.globalStyles,e.components),r=e.unhandledExpressions,u={varCount:0,root:t},o="$$defineModule({}, (require) => {";o+="$$strays = [];";for(var a=Ce(r,u),i=0,c=a.length;i<c;i++){var s=a[i];o+=s.content,o+=s.bindings.map(ve).join("\n"),o+="if ("+s.varName+".nodeType != null) {\n",o+="  $$strays.push("+s.varName+");\n",o+="}\n;"}for(var i=0,c=n.length;i<c;i++)o+=Ne(n[i],u).content;return o+="return {strays: $$strays};",o+="})"},ve=function(e){return"(() => {"+e+"} )();\n"},he=function(e){return"(() => { const binding = () => { "+e+" }; binding(); return binding; })()"},Ne=function(e,t){var r=e.id,u=(e.style,e.template),o=e.properties,a=xe(fe(r),t),i=n({},t,{varCount:0,contextName:"this"});return{varName:a,bindings:[],content:"class "+a+" extends HTMLElement {constructor() {super();this.$$bindings = [];}connectedCallback() {this.render();}"+o.map(function(e){var t=e.name;return"get "+t+"() {return this.$$"+t+";}set "+t+"(value) {if (this.$$"+t+" === value) {return;}const oldValue = this.$"+t+";this.$$"+t+" = value;if (this._rendered) {$$requestUpdate(this);}}"}).join("\n")+'render() {if (this._rendered) {return;}this._rendered = true;const shadow = this.attachShadow({ mode: "open" });'+o.map(function(e){var t=e.name,n=e.defaultValue;return"if (this.$$"+t+" == null) {this.$$"+t+" = "+(n||'this.getAttribute("'+t+'");')+"}"}).join("\n")+"let $$bindings = [];"+(u?u.content.map(function(e){var t=_e(e,i);return e?t.content+(t.bindings.length?"$$bindings = $$bindings.concat("+t.bindings.map(he)+");":"")+"shadow.appendChild("+t.varName+");":""}).join(""):"")+"this.$$bindings = $$bindings;}cloneShallow() {const clone = super.cloneShallow();clone._rendered = true;return clone;}static get observedAttributes() {return "+JSON.stringify(o.map(function(e){return e.name}))+";}attributeChangedCallback(name, oldValue, newValue) {if (super.attributeChangedCallback) {super.attributeChangedCallback(name, oldValue, newValue);}this[name] = newValue;}update() {if (!this._rendered) {return;}let bindings = this.$$bindings || [];"+me("bindings")+'}}customElements.define("'+r+'", '+a+");"}},_e=function(e,t){switch(e.type){case r.FRAGMENT:return Ae(e,t);case r.TEXT_NODE:return Re(e,t);case r.BLOCK:return Se(e,t);case r.ELEMENT:return ge(e,t);case r.SELF_CLOSING_ELEMENT:return ye(e,t)}return null},Ae=function(e,t){return Pe('document.createDocumentFragment("")',t)},Re=function(e,t){return Pe("document.createTextNode("+JSON.stringify(e.value.replace(/[\s\r\n\t]+/g," "))+")",t)},Se=function(e,t){var n=Pe('document.createTextNode("")',t),r=n.varName+"$$currentValue";return n.content+="let "+r+";",n.bindings.push($e(r,pe(e.value.value,t.contextName),function(e){return n.varName+".nodeValue = "+e},t)),n},ye=function(e,t){return Le(e,Oe(e,t),t)},Le=function(e,t,n){if(!e.modifiers.length)return t;for(var o,a,i,c,s=e.modifiers,l=t,E=0,p=s.length;E<p;E++){var f=s[E].value;f.type===u.IF?o=f:f.type===u.ELSE?a=f:f.type===u.ELSEIF?i=f:f.type===u.REPEAT&&(c=f)}if(c){var v=c.each.value,N=c.asKey,_=(void 0===N?{value:"index"}:N).value,A=c.asValue.value,R=Ge(n),S=R.fragment,y=R.start,L=R.end,O=(l=S).varName+"$$currentValue",$=l.varName+"$$childBindings";l.content+="let "+O+" = [];let "+$+" = [];",l.bindings.push("let $$newValue = ("+v+") || [];if ($$newValue === "+O+") {return;}const $$oldValue = "+O+";"+O+" = $$newValue;const $$parent = "+y.varName+".parentNode;const $$startIndex = Array.prototype.indexOf.call($$parent.childNodes, "+y.varName+"); const $$newValueCount = $$count($$newValue);const $$oldValueCount = $$count($$oldValue);if ($$newValueCount > $$oldValueCount) {for (let $$i = $$newValueCount - $$oldValueCount; $$i--;) {"+t.content+"$$parent.insertBefore("+t.varName+", "+L.varName+");const $$bindings = ["+t.bindings.map(function(e){return"("+A+", "+_+") => { "+e+"}"}).join(",")+"];"+$+".push(($$newValue, $$newKey) => {"+me("$$bindings","$$newValue, $$newKey")+"});}} else if ($$oldValue.length < $$newValue.length) {}let i = 0;$$each($$newValue, (value, k) => {"+$+"[i++](value, k);});"),t=l}if(o||i||a){for(var m=(o||i||a).condition,g=n.root===e||n.root.startTag===e?[n.root]:h(n.root,e).childNodes,C=g.findIndex(function(t){return t===e||e.type===r.START_TAG&&t.type===r.ELEMENT&&t.startTag===e}),b=void 0,E=C+1;E--;){var U=g[E];if(d(U,u.IF)){b="condition_"+T(U,n.root).join("");break}}var x=Ge(n),S=x.fragment,y=x.start,L=x.end,P=(l=S).varName+"$$bindings",O=l.varName+"$$currentValue";S.content+="let "+P+" = [];let "+O+" = false;",o&&(S.content+="let "+b+" = Infinity;"),l.bindings.push("const newValue = Boolean("+(m?pe(m):"true")+") && "+b+" >= "+C+";if (newValue) {"+b+" = "+C+";} else if ("+b+" === "+C+") {"+b+" = Infinity;}if (newValue && newValue === "+O+") {if ("+O+") {"+me(P)+"}return;}"+O+" = newValue;"+P+" = [];if (newValue) {const elementFragment = document.createDocumentFragment();"+t.content+(t.bindings.length?P+" = "+P+".concat("+t.bindings.map(he)+")":"")+"elementFragment.appendChild("+t.varName+");"+L.varName+".parentNode.insertBefore(elementFragment, "+L.varName+");} else {let curr = "+y.varName+".nextSibling;while(curr !== "+L.varName+") {curr.parentNode.removeChild(curr);curr = "+y.varName+".nextSibling;}}")}return l},Oe=function(e,t){for(var n=Pe('document.createElement("'+e.name+'")',t),u=0,o=e.attributes.length;u<o;u++)!function(u,o){var a=e.attributes[u],i=a.name,c=a.value,s=fe(i);if(c){if(c.type===r.STRING){var l=c;n.content+=n.varName+'.setAttribute("'+i+'", '+JSON.stringify(l.value)+");\n"}else if(c.type===r.STRING_BLOCK||c.type===r.BLOCK){var E=n.varName+"$$"+s+"$$currentValue";n.content+="let "+E+";\n";var p=void 0;p=c.type===r.STRING_BLOCK?$e(E,c.values.map(function(e){return e.type===r.BLOCK?pe(e.value.value,t.contextName):JSON.stringify(e.value)}).join(" + "),function(e){return n.varName+'.setAttribute("'+i+'", '+e+")"},t):$e(E,pe(c.value.value,t.contextName),function(e){return n.varName+"."+s+" = "+e},t),n.bindings.push(p)}}else n.content+=n.varName+"."+i+" = true;\n"}(u);return n},$e=function(e,t,n,r){return"let $$newValue = "+t+";if ($$newValue !== "+e+") {"+n(e+" = $$newValue")+"}"},me=function(e,t){return void 0===t&&(t=""),"for (let i = 0, n = "+e+".length; i < n; i++) {"+e+"[i]("+t+");}"},ge=function(e,t){switch(e.startTag.name){case"component":return null;default:return Le(e.startTag,be(e,t),t)}},Ce=function(e,t){for(var n=[],u=0,o=e.length;u<o;u++){var a=e[u];if(a.type===r.TEXT_NODE&&/^[[\s\r\n\t]$/.test(a.value)&&u>0&&u<o-1){var i=e[u-1],c=e[u+1];if(E(i)&&E(c))continue}var s=_e(a,t);s&&n.push(s)}return n},be=function(e,t){for(var n=Oe(e.startTag,t),r=Ce(e.childNodes,t),u=0,o=r.length;u<o;u++){var a=r[u];n.content+=a.content,n.content+=n.varName+".appendChild("+a.varName+");\n",(i=n.bindings).push.apply(i,a.bindings)}return n;var i},Ue=function(e,t,n){var r=xe(e,n);return{varName:r,bindings:[],content:t?"let "+r+" = "+t+";\n":"let "+r+";\n"}},xe=function(e,t){return e+"_"+t.varCount++},Pe=function(e,t){return Ue("node",e,t)},Ge=function(e){var t=Pe('document.createDocumentFragment("")',e),n=Pe('document.createTextNode("")',e),r=Pe('document.createTextNode("")',e);return t.content+=n.content+""+r.content+t.varName+".appendChild("+n.varName+");"+t.varName+".appendChild("+r.varName+");",{fragment:t,start:n,end:r}};return e.parseModuleSource=g,e.throwUnexpectedToken=ee,e.assertCurrTokenType=te,e.assertCurrTokenExists=ne,e.bundleVanilla=Ee,e.transpileBlockExpression=pe,e.loadModuleAST=ue,e.loadModuleDependencyGraph=oe,e}({});
