!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.paperclip={})}(this,function(e){"use strict";function t(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}const o=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};!function(e){e[e.STRING=0]="STRING",e[e.BLOCK=1]="BLOCK",e[e.STRING_BLOCK=2]="STRING_BLOCK",e[e.ELEMENT=3]="ELEMENT",e[e.SELF_CLOSING_ELEMENT=4]="SELF_CLOSING_ELEMENT",e[e.TEXT_NODE=5]="TEXT_NODE",e[e.COMMENT=6]="COMMENT",e[e.ATTRIBUTE=7]="ATTRIBUTE",e[e.START_TAG=8]="START_TAG",e[e.BLOCK_STRING=9]="BLOCK_STRING",e[e.FRAGMENT=10]="FRAGMENT",e[e.END_TAG=11]="END_TAG"}(e.PCExpressionType||(e.PCExpressionType={})),function(e){e.TYPE="TYPE",e.BIND="BIND",e.IF="IF",e.STRING="STRING",e.OBJECT="OBJECT",e.ARRAY="ARRAY",e.KEY_VALUE_PAIR="KEY_VALUE_PAIR",e.NUMBER="NUMBER",e.PROPERTY="PROPERTY",e.RESERVED_KEYWORD="RESERVED_KEYWORD",e.ELSEIF="ELSEIF",e.NOT="NOT",e.OPERATION="OPERATION",e.GROUP="GROUP",e.VAR_REFERENCE="VAR_REFERENCE",e.PROP_REFERENCE="PROP_REFERENCE",e.ELSE="ELSE",e.REPEAT="REPEAT"}(e.BKExpressionType||(e.BKExpressionType={})),function(e){e[e.SHEET=0]="SHEET",e[e.DECLARATION_PROPERTY=1]="DECLARATION_PROPERTY",e[e.STYLE_RULE=2]="STYLE_RULE",e[e.AT_RULE=3]="AT_RULE",e[e.IMPORT=4]="IMPORT",e[e.CHARSET=5]="CHARSET"}(e.CSSExpressionType||(e.CSSExpressionType={})),function(e){e.COLOR="COLOR",e.CALL="CALL",e.MEASUREMENT="MEASUREMENT",e.SPACED_LIST="SPACED_LIST",e.COMMA_LIST="COMMA_LIST",e.KEYWORD="KEYWORD",e.LIST="LIST"}(e.DcExpressionType||(e.DcExpressionType={}));var i,a=function(t){return t.type==e.PCExpressionType.SELF_CLOSING_ELEMENT?[]:t.childNodes},u=function(t){return t.type==e.PCExpressionType.SELF_CLOSING_ELEMENT?t.name:t.startTag.name},s=function(e){return e.value.value},E=function(e){return N(e).attributes},c=function(e){return N(e).modifiers},p=function(t){return t.type===e.PCExpressionType.ELEMENT||t.type===e.PCExpressionType.ELEMENT||t.type===e.PCExpressionType.START_TAG||t.type===e.PCExpressionType.END_TAG||t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT},l=function(t,r){return L(t,function(t){return t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT?r(t):t.type===e.PCExpressionType.ELEMENT&&r(t.startTag)})},T=function(t){return t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT||t.type==e.PCExpressionType.START_TAG?t:t.startTag},f=function(e,t){if(_(e,t)){var r=T(e).attributes.find(function(e){return e.name===t});return r&&r.value&&r.value.value}},_=function(t,r){return(t.type===e.PCExpressionType.ELEMENT||t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT||t.type===e.PCExpressionType.START_TAG)&&Boolean(T(t).attributes.find(function(e){return e.name===r}))},d=function(t){return L(t,function(t){return t.type===e.PCExpressionType.ELEMENT&&"style"===t.startTag.name})},y=function(t){return L(t,function(t){return t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT&&"link"===t.name&&"stylesheet"===f(t,"rel")})},S=function(e){return d(e).concat(y(e))},v=function(e){return h(e,"meta")},R=function(e){var t=v(e).find(function(e){return Boolean(f(e,"name"))});return t&&f(t,"content")},C=function(e,t,r){if(void 0===r&&(r=[]),!1===t(e,r))return!1;if(e.childNodes)for(var n=e,o=0,i=n.childNodes.length;o<i;o++){var a=n.childNodes[o];if(!1===C(a,t,r.concat(["childNodes",o])))return!1}},N=function(t){return t.type===e.PCExpressionType.ELEMENT?t.startTag:t},A=function(e,t){return N(e).modifiers.find(function(e){return e.value.type===t})},O=function(e,t){var r;return C(t,function(t,n){if(t===e)return r=n,!1}),r},L=function(e,t){var r=[];return C(e,function(e){t(e)&&r.push(e)}),r},h=function(e,t){return l(e,function(e){return e.name===t})},m=function(t,r){return L(t,function(t){return t.childNodes&&t.childNodes.find(function(t){return t===r||r.type===e.PCExpressionType.START_TAG&&t.type===e.PCExpressionType.ELEMENT&&t.startTag===r})})[0]},x=function(e){var t=[];return C(e,function(e){p(e)&&-1===t.indexOf(N(e).name)&&t.push(N(e).name)}),t},P=function(e,t,r){return{type:e,pos:t,value:r}},I={},g=function(e){if(I[e])return I[e];var t=1,r=0,n={};return(e+" ").split("").forEach(function(e,o){n[o]=[r,t],"\n"===e&&(r=0,t++),r++}),I[e]=n},M=function(e,t){var r="number"==typeof e?e:e.pos,n=g(t)[r];return{column:n[0],line:n[1],pos:r}},U=function(e,t,r){return{start:e.line?e:M(e,r),end:t&&t.line?t:M(t||r.length,r)}},D=function(){function e(e){this._target=e,this.pos=0,this.length=e.length}return e.prototype.curr=function(){return this._target[this.pos]},e.prototype.shift=function(){var e=this._target[this.pos];return this.next(),e},e.prototype.hasNext=function(){return this.pos<this.length-1},e.prototype.next=function(){return this._target[Math.min(this.pos=this.pos+1,this.length)]},e.prototype.prev=function(){return this._target[Math.max(this.pos=this.pos-1,0)]},e.prototype.ended=function(){return this.pos>=this.length},e}(),B=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.scan=function(e){for(var t="";this.pos<this.length;){var r=this._target[this.pos];if(!r.match(e))break;t+=r,this.pos++}return t},r.prototype.match=function(e){var t=this._target.substr(this.pos),r=t.match(e);if(r){var n=r[0];return this.pos+=t.indexOf(n)+n.length,n}return null},r.prototype.peek=function(e){return this._target.substr(this.pos,e)},r.prototype.take=function(e){var t=this._target.substr(this.pos,e);return this.pos+=e,t},r}(D),K=function(e){function r(t,r){var n=e.call(this,r)||this;return n.source=t,n}return t(r,e),r.prototype.peek=function(e){return void 0===e&&(e=1),this._target[this.pos+e]},r.prototype.peekUntil=function(e){for(var t=this.pos;t<this.length-1;)if(e(this._target[++t]))return this._target[t]},r.prototype.curr=function(){return e.prototype.curr.call(this)},r.prototype.next=function(){return e.prototype.next.call(this)},r}(D);!function(e){e[e.LESS_THAN=0]="LESS_THAN",e[e.LESS_THAN_OR_EQUAL=1]="LESS_THAN_OR_EQUAL",e[e.CLOSE_TAG=2]="CLOSE_TAG",e[e.COMMA=3]="COMMA",e[e.GREATER_THAN=4]="GREATER_THAN",e[e.GREATER_THAN_OR_EQUAL=5]="GREATER_THAN_OR_EQUAL",e[e.COMMENT=6]="COMMENT",e[e.BACKSLASH=7]="BACKSLASH",e[e.PERIOD=8]="PERIOD",e[e.BANG=9]="BANG",e[e.AND=10]="AND",e[e.OR=11]="OR",e[e.PLUS=12]="PLUS",e[e.COLON=13]="COLON",e[e.SEMICOLON=14]="SEMICOLON",e[e.MINUS=15]="MINUS",e[e.NUMBER=16]="NUMBER",e[e.AT=17]="AT",e[e.STAR=18]="STAR",e[e.PERCENT=19]="PERCENT",e[e.PAREN_OPEN=20]="PAREN_OPEN",e[e.PAREN_CLOSE=21]="PAREN_CLOSE",e[e.DOUBLE_EQUALS=22]="DOUBLE_EQUALS",e[e.TRIPPLE_EQUELS=23]="TRIPPLE_EQUELS",e[e.NOT_EQUALS=24]="NOT_EQUALS",e[e.NOT_DOUBLE_EQUALS=25]="NOT_DOUBLE_EQUALS",e[e.BRACKET_OPEN=26]="BRACKET_OPEN",e[e.BRACKET_CLOSE=27]="BRACKET_CLOSE",e[e.CURLY_BRACKET_OPEN=28]="CURLY_BRACKET_OPEN",e[e.CURLY_BRACKET_CLOSE=29]="CURLY_BRACKET_CLOSE",e[e.EQUALS=30]="EQUALS",e[e.SINGLE_QUOTE=31]="SINGLE_QUOTE",e[e.HASH=32]="HASH",e[e.DOUBLE_QUOTE=33]="DOUBLE_QUOTE",e[e.TEXT=34]="TEXT",e[e.RESERVED_KEYWORD=35]="RESERVED_KEYWORD",e[e.WHITESPACE=36]="WHITESPACE"}(i||(i={}));var $=function(e){for(var t=new B(e),r=[];!t.ended();){var n=t.curr(),o=void 0;if("<"===n)if("</"===t.peek(2))o=P(i.CLOSE_TAG,t.pos,t.take(2));else if("\x3c!--"===t.peek(4)){for(var a=t.take(4);!t.ended();){var u=t.curr();if("-"===u&&"--\x3e"===t.peek(3)){a+=t.take(3);break}t.next(),a+=u}o=P(i.COMMENT,t.pos,a)}else o="<="===t.peek(2)?P(i.LESS_THAN_OR_EQUAL,t.pos,t.take(2)):P(i.LESS_THAN,t.pos,t.shift());else if("&"===n&&"&&"===t.peek(2))o=P(i.AND,t.pos,t.take(2));else if("|"===n&&"||"===t.peek(2))o=P(i.OR,t.pos,t.take(2));else if(">"===n)o=">="===t.peek(2)?P(i.GREATER_THAN_OR_EQUAL,t.pos,t.take(2)):P(i.GREATER_THAN,t.pos,t.shift());else if("="===n)o="==="===t.peek(3)?P(i.TRIPPLE_EQUELS,t.pos,t.take(3)):"=="===t.peek(2)?P(i.DOUBLE_EQUALS,t.pos,t.take(2)):P(i.EQUALS,t.pos,t.shift());else if(":"===n)o=P(i.COLON,t.pos,t.shift());else if(";"===n)o=P(i.SEMICOLON,t.pos,t.shift());else if("@"===n)o=P(i.AT,t.pos,t.shift());else if(","===n)o=P(i.COMMA,t.pos,t.shift());else if("'"===n)o=P(i.SINGLE_QUOTE,t.pos,t.shift());else if("#"===n)o=P(i.HASH,t.pos,t.shift());else if("!"===n)o="!=="===t.peek(3)?P(i.NOT_DOUBLE_EQUALS,t.pos,t.take(3)):"!="===t.peek(2)?P(i.NOT_EQUALS,t.pos,t.take(2)):P(i.BANG,t.pos,t.shift());else if("/"===n){if("/*"===t.peek(2)){t.match(/.*?\*\//);continue}o=P(i.BACKSLASH,t.pos,t.shift())}else if("."===n)o=/\.\d/.test(t.peek(2))?b(t):P(i.PERIOD,t.pos,t.shift());else if('"'===n)o=P(i.DOUBLE_QUOTE,t.pos,t.shift());else if("+"===n)o=P(i.PLUS,t.pos,t.shift());else if("-"===n)o=/\-\d/.test(t.peek(2))?b(t):P(i.MINUS,t.pos,t.shift());else if("*"===n)o=P(i.STAR,t.pos,t.shift());else if("%"===n)o=P(i.PERCENT,t.pos,t.shift());else if("["===n)o=P(i.BRACKET_OPEN,t.pos,t.shift());else if("]"===n)o=P(i.BRACKET_CLOSE,t.pos,t.shift());else if("("===n)o=P(i.PAREN_OPEN,t.pos,t.shift());else if(")"===n)o=P(i.PAREN_CLOSE,t.pos,t.shift());else if("{"===n)o=P(i.CURLY_BRACKET_OPEN,t.pos,t.shift());else if("}"===n)o=P(i.CURLY_BRACKET_CLOSE,t.pos,t.shift());else if(/\d/.test(n))o=b(t);else if(/[\s\r\n\t]/.test(n))o=P(i.WHITESPACE,t.pos,t.scan(/[\s\r\n\t]/));else{var s=t.pos,E=t.scan(/[^-<>,='":@;\.\/\\(){}\[\]\s\r\n\t]/)||t.shift();o=P("undefined"===E?i.RESERVED_KEYWORD:i.TEXT,s,E)}r.push(o)}return new K(e,r)},b=function(e){return P(i.NUMBER,e.pos,e.match(/^\-?(\d+(\.\d+)?|\.\d+)/))},Y={},V=function(e){if(Y[e])return Y[e];var t=$(e);return Y[e]=G(t)},w=function(e){if(Y[e])return Y[e];var t=$(e);return Y[e]=pe(t)},G=function(t){for(var r=[];!t.ended();)r.push(H(t));return 1===r.length?r[0]:{type:e.PCExpressionType.FRAGMENT,location:U(0,t.source.length,t.source),childNodes:r}},H=function(e){switch(e.curr().type){case i.WHITESPACE:return Re(e);case i.SINGLE_QUOTE:case i.DOUBLE_QUOTE:return ve(e);case i.LESS_THAN:return de(e);case i.CLOSE_TAG:return _e(e);case i.COMMENT:return Ee(e);default:return ce(e)?k(e):Re(e)}},k=function(t){var r=t.curr();t.next(),t.next(),Ce(t);var n=F(t);return Ce(t),Oe(t,i.BRACKET_CLOSE),t.next(),Oe(t,i.BRACKET_CLOSE),t.next(),{type:e.PCExpressionType.BLOCK,location:U(r,t.curr(),t.source),value:n}},F=function(t){switch(t.curr().value){case"bind":return re(t);case"repeat":return ie(t);case"if":return oe(t,e.BKExpressionType.IF);case"elseif":return oe(t,e.BKExpressionType.ELSEIF);case"else":return oe(t,e.BKExpressionType.ELSE);case"property":return ne(t,e.BKExpressionType.PROPERTY);default:Ae(t.source,t.curr())}},j=function(e){return Q(e)},Q=function(t){var r=X(t);Ce(t);var n=t.curr(),o=n.type;if(!(o===i.AND||o===i.OR||o==i.PLUS||o===i.MINUS||o===i.STAR||o===i.BACKSLASH||o===i.DOUBLE_EQUALS||o===i.TRIPPLE_EQUELS||o===i.GREATER_THAN||o===i.LESS_THAN||o===i.LESS_THAN_OR_EQUAL||o===i.GREATER_THAN_OR_EQUAL||o===i.NOT_EQUALS||o===i.NOT_DOUBLE_EQUALS))return r;t.next(),Ce(t);var a=Q(t);return{type:e.BKExpressionType.OPERATION,left:r,right:a,operator:n.value,location:U(r.location.start,a.location.end,t.source)}},X=function(e){switch(Ce(e),e.curr().type){case i.BANG:return se(e);case i.SINGLE_QUOTE:case i.DOUBLE_QUOTE:return W(e);case i.NUMBER:return J(e);case i.CURLY_BRACKET_OPEN:return q(e);case i.BRACKET_OPEN:return z(e);case i.PAREN_OPEN:return ee(e);case i.TEXT:return ae(e);case i.RESERVED_KEYWORD:return te(e);default:Ae(e.source,e.curr())}},W=function(t){var r=t.curr();t.next();for(var n="";!t.ended();){var o=t.curr();if(o.value===r.value)break;"\\"!==o.value?(n+=o.value,t.next()):(n+=t.next().value,t.next())}return Oe(t,r.type),t.next(),{type:e.BKExpressionType.STRING,location:U(r,t.curr(),t.source),value:n}},J=function(t){var r=t.curr();return t.next(),{type:e.BKExpressionType.NUMBER,value:r.value,location:U(r,t.curr(),t.source)}},q=function(t){var r=t.curr();t.next();for(var n=[];!t.ended()&&(Ce(t),t.curr().type!==i.CURLY_BRACKET_CLOSE);){n.push(Z(t)),Ce(t);var o=t.curr();o.type!==i.CURLY_BRACKET_CLOSE&&(o.type!==i.COMMA&&o&&Ae(t.source,o),t.next())}return Oe(t,i.CURLY_BRACKET_CLOSE),t.next(),{type:e.BKExpressionType.OBJECT,location:U(r,t.curr(),t.source),properties:n}},z=function(t){var r=t.curr();t.next(),Ce(t);var n=[];if(t.curr().type!==i.BRACKET_CLOSE)for(;;){if(n.push(X(t)),Ce(t),t.curr().type===i.BRACKET_CLOSE)break;Oe(t,i.COMMA),t.next()}return Oe(t,i.BRACKET_CLOSE),t.next(),{type:e.BKExpressionType.ARRAY,location:U(r,t.curr(),t.source),values:n}},Z=function(t){var r;switch(t.curr().type){case i.SINGLE_QUOTE:case i.DOUBLE_QUOTE:r=W(t);break;default:r=ue(t)}Ce(t),Oe(t,i.COLON),t.next(),Ce(t);var n=j(t);return{type:e.BKExpressionType.KEY_VALUE_PAIR,location:U(r.location.start,n.location.end,t.source),key:r.name,value:n}},ee=function(t){var r=t.curr();t.next();var n=j(t);return t.next(),{type:e.BKExpressionType.GROUP,value:n,location:U(r,t.curr(),t.source)}},te=function(t){var r=t.curr();return t.next(),{type:e.BKExpressionType.RESERVED_KEYWORD,value:r.value,location:U(r,t.curr(),t.source)}},re=function(t){var r=t.curr();return t.next(),t.next(),{type:e.BKExpressionType.BIND,value:j(t),location:U(r,t.curr(),t.source)}},ne=function(e,t){var r=e.curr();return e.next(),e.next(),{type:t,name:ue(e).name,location:U(r,e.curr(),e.source)}},oe=function(e,t){var r=e.curr();return e.next(),Ce(e),{type:t,condition:e.curr().type!==i.BRACKET_CLOSE?j(e):null,location:U(r,e.curr(),e.source)}},ie=function(t){var r=t.curr();t.next();var n=j(t);Ce(t),t.next();var o,i=ue(t);return","===t.curr().value&&(t.next(),o=ue(t)),{type:e.BKExpressionType.REPEAT,location:U(r,t.curr(),t.source),each:n,asKey:o,asValue:i}},ae=function(t){for(var r=ue(t),n=[r];!t.ended()&&t.curr().type===i.PERIOD;)t.next(),Oe(t,i.TEXT),n.push(ue(t));return 1===n.length?n[0]:{type:e.BKExpressionType.PROP_REFERENCE,path:n,location:U(r.location.start,t.curr(),t.source)}},ue=function(t){Ce(t);var r=t.curr();return t.next(),{type:e.BKExpressionType.VAR_REFERENCE,name:r.value,location:U(r,t.curr(),t.source)}},se=function(t){var r=t.curr();return t.next(),{type:e.BKExpressionType.NOT,value:X(t),location:U(r,t.curr(),t.source)}},Ee=function(t){var r=t.curr();return t.next(),{type:e.PCExpressionType.COMMENT,value:r.value.substr(4,r.value.length-7),location:U(r,t.curr(),t.source)}},ce=function(e){return e.curr().type===i.BRACKET_OPEN&&e.peek(1).type===i.BRACKET_OPEN},pe=function(t){for(var r=t.curr(),n=[];;){if(Ce(t),t.ended()||t.curr().type===i.CLOSE_TAG)break;n.push(le(t))}return{type:e.CSSExpressionType.SHEET,children:n,location:U(r,t.curr(),t.source)}},le=function(e){switch(e.curr().type){case i.AT:return Te(e);default:return fe(e)}},Te=function(t){var r=t.curr();t.next();for(var n="";t.curr().type!==i.WHITESPACE&&t.curr().type!==i.CURLY_BRACKET_OPEN;)n+=t.curr().value,t.next();t.next();var o=[],a=[];for(Ce(t);!t.ended()&&(Ce(t),t.curr().type!==i.CURLY_BRACKET_OPEN&&t.curr().type!==i.SEMICOLON);)t.curr().type===i.SINGLE_QUOTE||t.curr().type===i.DOUBLE_QUOTE?o.push(W(t).value):(o.push(t.curr().value),t.next());var u=t.curr();if(t.next(),u.type===i.CURLY_BRACKET_OPEN){for(;!t.ended()&&(Ce(t),t.curr().type!==i.CURLY_BRACKET_CLOSE);)a.push(le(t));Oe(t,i.CURLY_BRACKET_CLOSE),t.next()}return{type:e.CSSExpressionType.AT_RULE,name:n,params:o,children:a,location:U(r,t.curr(),t.source)}},fe=function(t){for(var r=t.curr(),n="";!t.ended();){var o=t.curr();if(o.type==i.CURLY_BRACKET_OPEN||o.type===i.SEMICOLON||o.type===i.CURLY_BRACKET_CLOSE)break;o.type===i.SINGLE_QUOTE||o.type===i.DOUBLE_QUOTE?n+=o.value+W(t).value+o.value:(n+=o.value,t.next())}if(t.curr().type===i.SEMICOLON||t.curr().type===i.CURLY_BRACKET_CLOSE){var a=n.match(/(.+?):(.+)/),u=(a[0],a[1]),s=a[2];return t.curr().type===i.SEMICOLON&&t.next(),{type:e.CSSExpressionType.DECLARATION_PROPERTY,location:U(r,t.curr(),t.source),name:u,value:s}}Oe(t,i.CURLY_BRACKET_OPEN),t.next();var E=[];for(Ce(t);!t.ended()&&t.curr().type!==i.CURLY_BRACKET_CLOSE;)E.push(fe(t)),Ce(t);return Oe(t,i.CURLY_BRACKET_CLOSE),t.next(),n=n.trim(),{type:e.CSSExpressionType.STYLE_RULE,children:E,selectorText:n,location:U(r,t.curr(),t.source)}},_e=function(t){var r=t.curr();t.next();var n=Ne(t);return Oe(t,i.GREATER_THAN),t.next(),{type:e.PCExpressionType.END_TAG,name:n,location:U(r,t.curr(),t.source)}},de=function(t){var r=t.curr();Oe(t,i.LESS_THAN),t.next();for(var n=Ne(t),o=[],a=[];!t.ended();){Ce(t);var u=t.curr();if(u.type===i.BACKSLASH||u.type==i.GREATER_THAN)break;ce(t)?a.push(k(t)):o.push(Se(t))}if(t.curr().type===i.BACKSLASH)return t.next(),t.next(),{type:e.PCExpressionType.SELF_CLOSING_ELEMENT,name:n,attributes:o,modifiers:a,location:U(r,t.curr(),t.source)};t.next();var s=t.curr(),E=ye(n,t),c=E[0],p=E[1];return{type:e.PCExpressionType.ELEMENT,startTag:{name:n,type:e.PCExpressionType.START_TAG,location:U(r,s,t.source),modifiers:a,attributes:o},childNodes:c,location:U(r,t.curr(),t.source),endTag:p}},ye=function(t,r){var n=[];if("style"===t){var o=pe(r);return Ce(r),Oe(r,i.CLOSE_TAG),[[o],_e(r)]}if("style"===t||"script"===t){for(var a="",u=r.curr();!r.ended()&&r.curr().type!==i.CLOSE_TAG;)a+=r.curr().value,r.next();return[[{type:e.PCExpressionType.TEXT_NODE,value:a,location:U(u,r.curr(),r.source)}],H(r)]}for(var s;!r.ended();){var E=H(r);if(E.type===e.PCExpressionType.END_TAG){s=E;break}n.push(E)}return[n,s]},Se=function(t){var r,n=t.curr(),o=Ne(t);return t.curr().type===i.EQUALS&&(t.next(),r=H(t)),{type:e.PCExpressionType.ATTRIBUTE,name:o,value:r,location:U(n,t.curr(),t.source)}},ve=function(t){var r=t.curr(),n=[],o=!1;for(t.next();!t.ended();){var i=t.curr();if(i.type===r.type)break;ce(t)?(o=!0,n.push(k(t))):(t.next(),n.push({type:e.PCExpressionType.STRING,value:i.value,location:U(i.pos,t.curr(),t.source)}))}t.next();var a=U(r,t.curr(),t.source);return o?{type:e.PCExpressionType.STRING_BLOCK,location:a,values:n}:{type:e.PCExpressionType.STRING,location:a,value:n.map(function(e){return e.value}).join("")}},Re=function(t){var r=t.curr();t.next();for(var n=r.value;!t.ended();){var o=t.curr();if(o.type===i.COMMENT||o.type===i.LESS_THAN||o.type==i.CLOSE_TAG||ce(t))break;t.next(),n+=o.value}return{type:e.PCExpressionType.TEXT_NODE,value:n,location:U(r,t.curr(),t.source)}},Ce=function(e){for(;e.curr().type===i.WHITESPACE;)e.next()},Ne=function(e){for(var t="";e.curr().type!==i.WHITESPACE&&e.curr().type!==i.GREATER_THAN&&e.curr().type!==i.EQUALS;)t+=e.curr().value,e.next();return t},Ae=function(e,t){if(!t)throw new Error("Unexpected end of file (missing closing expression).");var r=M(t,e);throw new Error('Unexpected token "'+t.value+'" at '+r.line+":"+r.column)},Oe=function(e,t){var r=e.curr();r&&r.type===t||Ae(e.source,e.curr())},Le=function(e){e.curr()||Ae(e.source,e.curr())};!function(e){e.TANDEM="TANDEM",e.WEB="WEB"}(e.PaperclipTargetType||(e.PaperclipTargetType={}));var he=Symbol(),me=function(e,t){if(e[he]&&e[he][0]===e)return e[he][1];var r=Ke(e,t);return e[he]=[e,r],r},xe=function(e,t){var r=t.split("/");r.pop();var n=(e=e.replace("./","")).split("../"),o=n.pop();return r.splice(r.length-n.length,r.length),r.join("/")+"/"+o},Pe=function(e,t){var r={};return x(e).forEach(function(e){var n=De(e,t);n&&(r[e]=n)}),r},Ie=function(e,t){var r={};return e.module.components.forEach(function(e){Object.assign(r,Pe(e.template,t))}),r},ge=function(e,t){return t.components.find(function(t){return t.id===e})},Me=function(e,t){var r=[],n=(Ie(e,t),Ie(e,t));for(var o in n){var i=n[o];-1===r.indexOf(i)&&r.push(i)}return r},Ue=function(e,t){var r=e.resolvedImportUris,n=[];for(var o in r)n.push(t[r[o]]);return n},De=function(e,t){for(var r in t)for(var n=t[r],o=0,i=n.module.components.length;o<i;o++)if(n.module.components[o].id===e)return n},Be=function(e,t,r){var n=t.readFile,o=t.resolveFile,i=void 0===o?xe:o;return void 0===r&&(r={}),r[e]?Promise.resolve(r):Promise.resolve(n(e)).then(V).then(function(t){return me(t,e)}).then(function(t){var o={};return r[e]={module:t,resolvedImportUris:o},t.imports.length?Promise.all(t.imports.map(function(t){return Promise.resolve(i(t.href,e)).then(function(e){return o[t.href]=e,Be(e,{readFile:n,resolveFile:i},r)})})).then(function(){return r}):Promise.resolve(r)}).catch(function(t){throw console.error("Error in "+e),t})},Ke=function(t,r){for(var n=t.type===e.PCExpressionType.FRAGMENT?t.childNodes:[t],o=[],i=[],s=[],p=[],l=0,T=n.length;l<T;l++){var f=n[l];if(f.type===e.PCExpressionType.SELF_CLOSING_ELEMENT||f.type===e.PCExpressionType.ELEMENT){var _=f,d=u(_),y=a(_),S=E(_),v=c(_);if("component"===d&&_.type===e.PCExpressionType.ELEMENT){i.push(Ve(_,v,S,y));continue}if("link"===d){o.push(we(S));continue}if("style"===d){s.push(_);continue}}p.push(f)}return{source:t,uri:r,imports:o,components:i,globalStyles:s,unhandledExpressions:p}},$e=function(e){for(var t={},r=0,n=e.split(/,\s+/g);r<n.length;r++){var o=n[r].split("="),i=o[0],a=o[1];t[i]=a}return t},be=function(e,t){return e.metadata.filter(function(e){return e.name===t})},Ye=function(e,t){return be(e,t).shift()},Ve=function(t,r,n,o){for(var i,c,p,l=[],T=r.map(function(e){return e.value}).filter(function(t){return t.type===e.BKExpressionType.PROPERTY}),_=0,d=n.length;_<d;_++){var y=n[_];"id"===y.name&&(i=s(y))}for(var _=0,d=o.length;_<d;_++){var S=o[_];if(S.type===e.PCExpressionType.SELF_CLOSING_ELEMENT||S.type===e.PCExpressionType.ELEMENT){var v=S,R=u(v);E(v),a(v);"style"===R?c=v:"template"===R?p=v:"meta"===R&&l.push({name:f(v,"name"),params:$e(f(v,"content")||"")})}}return{source:t,id:i,style:c,metadata:l,properties:T,template:p}},we=function(e){for(var t,r,n=0,o=e.length;n<o;n++){var i=e[n];"href"===i.name?t=s(i):"type"===i.name&&(r=s(i))}return{type:r,href:t}},Ge=function(e,t){return Be(e,t.io).then(function(t){return{code:Fe(e,t),graph:t,entryDependency:t[e]}})},He=function(t){switch(t.type){case e.BKExpressionType.NOT:return"!"+He(t.value);case e.BKExpressionType.PROP_REFERENCE:return(n=t).path.map(He).join(".");case e.BKExpressionType.STRING:var r=t;return JSON.stringify(r.value);case e.BKExpressionType.NUMBER:return t.value;case e.BKExpressionType.VAR_REFERENCE:var n=t;return n.name;case e.BKExpressionType.ARRAY:return"["+t.values.map(He)+"]";case e.BKExpressionType.OBJECT:for(var o=t,i="{",a=0,u=o.properties.length;a<u;a++){var s=o.properties[a];i+=s.key+":"+He(s.value)+", "}return i+="}";case e.BKExpressionType.GROUP:return"("+He(t.value)+")";case e.BKExpressionType.RESERVED_KEYWORD:return t.value;case e.BKExpressionType.OPERATION:var E=t,c=E.left,p=E.operator,l=E.right;return He(c)+" "+p+" "+He(l);default:throw new Error("Unable to transpile BK block "+t.type)}},ke=function(e){return e.replace(/[\d-]+/g,"_")},Fe=function(e,t){var r="((window) => {";r+='var document = window.document;const $$each = (object, iterator) => {if (Array.isArray(object)) {object.forEach(iterator);} else {for (const key in object) {iterator(object[key], key);}}};const $$count = (object) => {return Array.isArray(object) ? object.length : Object.keys(object).length;};const $$defineModule = (run) => {let exports;return () => {if (exports) return exports;exports = {};return exports = run((dep) => {return $$modules[dep]()});}};const $$setElementProperty = (element, property, value) => {if (property === "style" && typeof value !== "string") {\nelement.style = "";\nObject.assign(element.style, value);\n} else {\nelement[property] = value;}\n};let updating = false;let toUpdate = [];const $$requestUpdate = (object) => {if (toUpdate.indexOf(object) === -1) {toUpdate.push(object);}if (updating) {return;}updating = true;requestAnimationFrame(function() {for(let i = 0; i < toUpdate.length; i++) {const target = toUpdate[i];target.update();}toUpdate = [];updating = false;});};',r+="$$modules = {};";for(var n in t)r+='$$modules["'+n+'"] = '+je(t[n].module,t[n].resolvedImportUris)+";";return r+='const entry = $$modules["'+e+'"]();',r+="return {entry,modules: $$modules};})(window)"},je=function(e,t){for(var r=e.source,n=e.imports,o=e.globalStyles,i=e.components,a=(e.unhandledExpressions,{uri:e.uri,varCount:0,root:r}),u="$$defineModule((require) => {",s=At(o,a),E=0,c=s.length;E<c;E++)u+=(l=s[E]).content,u+="document.body.appendChild("+l.varName+");";for(var E=0,c=n.length;E<c;E++){var p=n[E],l=Lt("import","require("+JSON.stringify(t[p.href])+")",a);u+=l.content}for(var E=0,c=i.length;E<c;E++)u+=Xe(i[E],a).content;return u+="return {};",u+="})"},Qe=function(e){return"(() => { const binding = () => { "+e+" }; binding(); return binding; })()"},Xe=function(e,t){var r=e.id,n=e.style,i=e.template,a=e.properties,u=ht(ke(r),t),s=o({},t,{varCount:0,contextName:"this"}),E=n&&it(n,s);return{varName:u,bindings:[],content:"class "+u+" extends HTMLElement {constructor() {super();this.$$bindings = [];}connectedCallback() {this.render();}"+a.map(function(e){var t=e.name;return"get "+t+"() {return this.$$"+t+";}set "+t+"(value) {if (this.$$"+t+" === value || String(this.$$"+t+") === String(value)) {return;}const oldValue = this.$"+t+";this.$$"+t+' = value;if (typeof value !== "object") {this.setAttribute('+JSON.stringify(t)+", value);}if (this._rendered) {$$requestUpdate(this);}}"}).join("\n")+'render() {if (this._rendered) {return;}this._rendered = true;const shadow = this.attachShadow({ mode: "open" });'+(E?E.content+"shadow.appendChild("+E.varName+");":"")+a.map(function(e){var t=e.name,r=e.defaultValue;return"if (this.$$"+t+" == null) {this.$$"+t+" = "+(r||'this.getAttribute("'+t+'");')+"}"}).join("\n")+"let $$bindings = [];"+(i?i.childNodes.map(function(e){var t=We(e,s);return e&&t?t.content+(t.bindings.length?"$$bindings = $$bindings.concat("+t.bindings.map(function(e){return"(() => {const $$binding = () => {const { "+a.map(function(e){return e.name}).join(",")+" } = this;"+e+"};$$binding();return $$binding;})()"})+");":"")+"shadow.appendChild("+t.varName+");":""}).join(""):"")+"this.$$bindings = $$bindings;}cloneShallow() {const clone = super.cloneShallow();clone._rendered = true;return clone;}static get observedAttributes() {return "+JSON.stringify(a.map(function(e){return e.name}))+";}attributeChangedCallback(name, oldValue, newValue) {if (super.attributeChangedCallback) {super.attributeChangedCallback(name, oldValue, newValue);}this[name] = newValue;}update() {if (!this._rendered) {return;}let bindings = this.$$bindings || [];"+nt("bindings")+'}}if (!customElements.get("'+r+'")) {customElements.define("'+r+'", '+u+');} else {console.error("Custom element \\"'+r+'\\" is already defined, ignoring");}'}},We=function(t,r){switch(t.type){case e.PCExpressionType.FRAGMENT:return Je(t,r);case e.PCExpressionType.TEXT_NODE:return qe(t,r);case e.PCExpressionType.BLOCK:return ze(t,r);case e.PCExpressionType.ELEMENT:return ot(t,r);case e.PCExpressionType.SELF_CLOSING_ELEMENT:return Ze(t,r)}return null},Je=function(e,t){return mt('document.createDocumentFragment("")',t)},qe=function(e,t){return It(mt("document.createTextNode("+JSON.stringify(e.value.replace(/[\s\r\n\t]+/g," "))+")",t),e,t)},ze=function(e,t){var r=mt('document.createTextNode("")',t),n=(r=It(r,e,t)).varName+"$$currentValue";return r.content+="let "+n+";",r.bindings.push(rt(n,He(e.value.value),function(e){return r.varName+".nodeValue = "+e},t)),r},Ze=function(e,t){return et(e,It(tt(e,t),e,t),t)},et=function(t,r,n){if(!t.modifiers.length)return r;for(var o,i,a,u,s,E=t.modifiers,c=r,l=0,T=E.length;l<T;l++)(M=E[l].value).type===e.BKExpressionType.IF?o=M:M.type===e.BKExpressionType.ELSE?i=M:M.type===e.BKExpressionType.ELSEIF?a=M:M.type===e.BKExpressionType.REPEAT?u=M:M.type===e.BKExpressionType.BIND&&(s=M);if(s){var f=s.value,_=(c={varName:r.varName,content:r.content,bindings:r.bindings.slice()}).varName+"$$spreadValue",d=He(f);c.content+="let "+_+";",c.bindings.push(rt(_,d,function(e){return"for (const $$key in "+_+") {$$setElementProperty("+r.varName+", $$key, "+_+"[$$key]);}"},n)),r=c}if(u){var y=u.each,S=u.asKey,v=u.asValue,R=He(y),C=S?He(S):"index",N=He(v),L=Pt(n),h=L.fragment,x=L.start,P=L.end,I=(c=h).varName+"$$currentValue",g=c.varName+"$$childBindings";c.content+="let "+I+" = [];let "+g+" = [];",c.bindings.push("let $$newValue = ("+R+") || [];if ($$newValue === "+I+") {return;}const $$oldValue = "+I+";"+I+" = $$newValue;const $$parent = "+x.varName+".parentNode;const $$startIndex = Array.prototype.indexOf.call($$parent.childNodes, "+x.varName+"); const $$newValueCount = $$count($$newValue);const $$oldValueCount = $$count($$oldValue);if ($$newValueCount > $$oldValueCount) {for (let $$i = $$newValueCount - $$oldValueCount; $$i--;) {"+r.content+"$$parent.insertBefore("+r.varName+", "+P.varName+");const $$bindings = ["+r.bindings.map(function(e){return"("+N+", "+C+") => { "+e+"}"}).join(",")+"];"+g+".push(($$newValue, $$newKey) => {"+nt("$$bindings","$$newValue, $$newKey")+"});}} else if ($$oldValue.length < $$newValue.length) {}let i = 0;$$each($$newValue, (value, k) => {"+g+"[i++](value, k);});"),r=c}if(o||a||i){for(var M=o||a||i,U=M.condition,D=n.root===t||n.root.startTag===t?[n.root]:m(n.root,t).childNodes,B=D.findIndex(function(r){return r===t||t.type===e.PCExpressionType.START_TAG&&r.type===e.PCExpressionType.ELEMENT&&r.startTag===t}),K=void 0,l=B+1;l--;){var $=D[l];if(p($)&&A($,e.BKExpressionType.IF)){K="condition_"+O($,n.root).join("");break}}if(!K)throw new Error("Element condition "+e.BKExpressionType[M.type]+" defined without an IF block.");var b=Pt(n),h=b.fragment,x=b.start,P=b.end,Y=(c=h).varName+"$$bindings",I=c.varName+"$$currentValue";h.content+="let "+Y+" = [];let "+I+" = false;",o&&(h.content+="let "+K+" = Infinity;"),c.bindings.push("const newValue = Boolean("+(U?He(U):"true")+") && "+K+" >= "+B+";if (newValue) {"+K+" = "+B+";} else if ("+K+" === "+B+") {"+K+" = Infinity;}if (newValue && newValue === "+I+") {if ("+I+") {"+nt(Y)+"}return;}"+I+" = newValue;"+Y+" = [];if (newValue) {const elementFragment = document.createDocumentFragment();"+r.content+(r.bindings.length?Y+" = "+Y+".concat("+r.bindings.map(Qe)+");":"")+"elementFragment.appendChild("+r.varName+");"+P.varName+".parentNode.insertBefore(elementFragment, "+P.varName+");} else {let curr = "+x.varName+".nextSibling;while(curr !== "+P.varName+") {curr.parentNode.removeChild(curr);curr = "+x.varName+".nextSibling;}}")}return c},tt=function(t,r){for(var n=mt('document.createElement("'+t.name+'")',r),o=0,i=t.attributes.length;o<i;o++)!function(o,i){var a=t.attributes[o],u=a.name,s=a.value,E=ke(u);if(s){if(s.type===e.PCExpressionType.STRING){var c=s;n.content+=n.varName+'.setAttribute("'+u+'", '+JSON.stringify(c.value)+");\n"}else if(s.type===e.PCExpressionType.STRING_BLOCK||s.type===e.PCExpressionType.BLOCK){var p=n.varName+"$$"+E+"$$currentValue";n.content+="let "+p+";\n";var l=void 0;l=s.type===e.PCExpressionType.STRING_BLOCK?rt(p,s.values.map(function(t){return t.type===e.PCExpressionType.BLOCK?He(t.value.value):JSON.stringify(t.value)}).join(" + "),function(e){return n.varName+'.setAttribute("'+u+'", '+e+")"},r):rt(p,He(s.value.value),function(e){return"$$setElementProperty("+n.varName+', "'+E+'", '+e+")"},r),n.bindings.push(l)}}else n.content+=n.varName+'.setAttribute("'+u+'", "true");'}(o);return n},rt=function(e,t,r,n){return"let $$newValue = "+t+";if ($$newValue !== "+e+") {"+e+" = $$newValue;"+r(e)+"}"},nt=function(e,t){return void 0===t&&(t=""),"for (let i = 0, n = "+e+".length; i < n; i++) {"+e+"[i]("+t+");}"},ot=function(e,t){switch(e.startTag.name){case"style":return it(e,t);default:return et(e.startTag,Ot(e,t),t)}},it=function(e,t){var r=mt('document.createElement("style")',t);(r=It(r,e,t)).content+="if (window.$synthetic) {";var n=at(e.childNodes[0],t);return r.content+=n.content+(r.varName+".$$setSheet(")+n.varName+");",r.content+="} else {"+r.varName+".textContent = "+JSON.stringify(Ct(e.childNodes[0]))+";}",r},at=function(e,t){var r=ut(e.children,t),n=xt("new CSSStyleSheet(["+r.map(function(e){return e.varName}).join(",")+"])",t);return n=It(n,e,t),n.content=r.map(function(e){return e.content}).join("\n")+n.content,n},ut=function(e,t){return e.map(function(e){return st(e,t)}).filter(Boolean)},st=function(t,r){switch(t.type){case e.CSSExpressionType.AT_RULE:return Et(t,r);case e.CSSExpressionType.STYLE_RULE:return vt(t,r)}throw new Error("Unexpected rule "+t.type)},Et=function(e,t){switch(e.name){case"media":return ct(e,t);case"keyframes":return Tt(e,t);case"font-face":return pt(e,t);case"import":return dt(e,t);case"charset":return yt(e,t)}},ct=function(e,t){return ft(e,t,"CSSMediaRule",vt)},pt=function(e,t){return It(xt("new CSSFontFaceRule("+Rt(lt(e),t)+")",t),e,t)},lt=function(t){return t.children.filter(function(t){return t.type===e.CSSExpressionType.DECLARATION_PROPERTY})},Tt=function(e,t){return ft(e,t,"CSSKeyframesRule",_t)},ft=function(e,t,r,n){var o=e.children.map(function(e){return n(e,t)}).filter(Boolean),i=xt("new "+r+"("+JSON.stringify(e.params.join(" "))+", ["+o.map(function(e){return e.varName}).join(",")+"])",t);return i.content=o.map(function(e){return e.content}).join("\n")+i.content,i},_t=function(e,t){return St(e,"CSSKeyframeRule",t)},dt=function(e,t){return null},yt=function(e,t){return null},St=function(e,t,r){return xt("new "+t+"("+JSON.stringify(e.selectorText)+", "+Rt(lt(e),r)+")",r)},vt=function(e,t){return St(e,"CSSStyleRule",t)},Rt=function(e,t){for(var r="{",n=0,o=e;n<o.length;n++){var i=o[n];r+='"'+i.name+'": "'+i.value.replace(/"/g,'\\"').replace(/[\s\r\n\t]+/g," ")+'", '}return"CSSStyleDeclaration.fromObject("+(r+="}")+")"},Ct=function(e,t){return void 0===t&&(t=function(e){return e}),e.children.map(function(e){return Nt(e,t)}).filter(Boolean).join(" ")},Nt=function(t,r){switch(t.type){case e.CSSExpressionType.AT_RULE:var n=t;if("charset"===n.name||"import"===n.name)return null;a="@"+n.name+" "+n.params+" {";return a+=n.children.map(function(e){return Nt(e,r)}).filter(Boolean).join(" "),a+="}";case e.CSSExpressionType.DECLARATION_PROPERTY:var o=t;return o.name+": "+o.value+";";case e.CSSExpressionType.STYLE_RULE:var i=t,a=r(i.selectorText,i)+" {";return a+=i.children.map(function(e){return Nt(e,r)}).filter(Boolean).join(""),a+="}"}},At=function(t,r){for(var n=[],o=0,i=t.length;o<i;o++){var a=t[o];if(a.type===e.PCExpressionType.TEXT_NODE&&/^[\s\r\n\t]+$/.test(a.value)){var u=t[o-1],s=t[o+1];if((!u||p(u))&&(!s||p(s)))continue}var E=We(a,r);E&&n.push(E)}return n},Ot=function(e,t){var r=tt(e.startTag,t);r=It(r,e,t);for(var n=At(e.childNodes,t),o=0,i=n.length;o<i;o++){var a=n[o];r.content+=a.content,r.content+=r.varName+".appendChild("+a.varName+");\n",(u=r.bindings).push.apply(u,a.bindings)}return r;var u},Lt=function(e,t,r){var n=ht(e,r);return{varName:n,bindings:[],content:t?"let "+n+" = "+t+";\n":"let "+n+";\n"}},ht=function(e,t){return e+"_"+t.varCount++},mt=function(e,t){return Lt("node",e,t)},xt=function(e,t){return Lt("rule",e,t)},Pt=function(e){var t=mt('document.createDocumentFragment("")',e),r=mt('document.createTextNode("")',e),n=mt('document.createTextNode("")',e);return t.content+=r.content+""+n.content+t.varName+".appendChild("+r.varName+");"+t.varName+".appendChild("+n.varName+");",{fragment:t,start:r,end:n}},It=function(e,t,r){var n=o({uri:r.uri,type:t.type},t.location);return e.content+=e.varName+".source = "+JSON.stringify(n)+";",e};!function(e){e[e.OBJECT=1]="OBJECT",e[e.ARRAY=2]="ARRAY",e[e.STRING=4]="STRING",e[e.BOOLEAN=8]="BOOLEAN",e[e.NUMBER=16]="NUMBER",e[e.OPTIONAL=32]="OPTIONAL",e[e.EXTENDABLE=64]="EXTENDABLE",e[e.OBJECT_OR_ARRAY=3]="OBJECT_OR_ARRAY",e[e.ANY_PRIMITIVE=28]="ANY_PRIMITIVE",e[e.EXTENDABLE_OBJECT=65]="EXTENDABLE_OBJECT",e[e.ANY=95]="ANY",e[e.STRING_OR_NUMBER=20]="STRING_OR_NUMBER"}(e.InferredTypeKind||(e.InferredTypeKind={}));var gt={a:{href:e.InferredTypeKind.STRING}},Mt={},Ut=function(e,t){var r=t.currentScope[e[0]];return r&&(e=r.concat(e)),e},Dt=function(e,t){Ut(e,t);for(var r=t.context,n=0,o=e.length;n<o;n++){var i=e[n];if(!r[1]||!r[1][i])return;r=r[1][i]}return r},Bt=function(e,t,r){return o({},r,{currentScope:o({},r.currentScope,(n={},n[e]=t,n))});var n},Kt=function(e,t){return o({},t,{currentScope:o({},t.currentScope,(r={},r[e]=void 0,r))});var r},$t=function(e,t,r){if(!e)return r;var n=Yt(r.context,e,t);return bt(n,r)},bt=function(e,t){return o({},t,{context:e})},Yt=function(t,r,n,i){void 0===i&&(i=0);var a=r[i];if(i===r.length)return n.slice();var u=t.slice();t[0]===e.InferredTypeKind.ANY?u=[e.InferredTypeKind.OBJECT,{}]:t[0]&e.InferredTypeKind.ARRAY||(t[0],e.InferredTypeKind.OBJECT);var s=u[1]||{};return u=[u[0],o({},s,(E={},E[a]=Yt(s[a]||[e.InferredTypeKind.OBJECT,s],r,n,i+1),E))];var E},Vt=function(e,t){for(var r=0,n=e;r<n.length;r++){var o=n[r];t=$t(o[0],o[1],t)}return t},wt=function(e,t){return[e,t]},Gt=function(e,t){return void 0===t&&(t=null),[e,t]},Ht=function(t){return void 0===t&&(t=Gt(e.InferredTypeKind.OBJECT,{})),{context:t,currentScope:{}}},kt=function(e){return e[0]},Ft=function(e){return e[1]},jt=function(e){return Qt(e,Ht()).context},Qt=function(t,r){switch(void 0===r&&(r=Ht()),t.type){case e.PCExpressionType.TEXT_NODE:return r;case e.PCExpressionType.BLOCK:return Wt(t,r);case e.PCExpressionType.FRAGMENT:return nr(t.childNodes,r);case e.PCExpressionType.ELEMENT:case e.PCExpressionType.SELF_CLOSING_ELEMENT:return Xt(t,r)}return r},Xt=function(t,r){return r=er(t,r),A(t,e.BKExpressionType.REPEAT)||(r=nr(a(t),r)),r},Wt=function(e,t){return r=Zt(e.value,t),r[0],t=r[1];var r},Jt=function(e,t,r){return qt(e.map(function(e){var r=e[0],n=e[1],o=n[0],i=n[1];return r&&wt(r,Gt(o&t,i))}),r)},qt=function(e,t){for(var r=[],n=0,o=e.length;n<o;n++){var i=e[n];t=$t(i[0],i[1],t),r.push(i)}return[r,t]},zt=function(e,t,r){return qt(e.map(function(e){var r=e[0],n=e[1];n[0],n[1];return wt(r,t)}),r)},Zt=function(t,r){switch(t.type){case e.BKExpressionType.OPERATION:var n=t,o=n.left,i=n.operator,a=n.right,u=void 0,s=void 0;u=(P=Zt(o,r))[0],r=P[1],s=(I=Zt(a,r))[0],r=I[1];var E=u.concat(s);if(/^[\*\/\-%]$/.test(i))for(var c=0,p=E.length;c<p;c++){var l=E[c],T=l[0],f=l[1][0];r=$t(T,[f&e.InferredTypeKind.NUMBER,null],r)}else{if("+"===i)return zt(E,Gt(e.InferredTypeKind.ANY),r);if("==="===i||"!=="===i){var _=E.reduce(function(e,t){return e&Ft(t)[0]},e.InferredTypeKind.ANY);return zt(E,Gt(_),r)}}return[E,r];case e.BKExpressionType.STRING:return[[wt(null,Gt(e.InferredTypeKind.STRING))],r];case e.BKExpressionType.NUMBER:return[[wt(null,Gt(e.InferredTypeKind.NUMBER))],r];case e.BKExpressionType.VAR_REFERENCE:case e.BKExpressionType.PROP_REFERENCE:var T=t.type===e.BKExpressionType.VAR_REFERENCE?[t.name]:t.path.map(function(e){return e.name}),d=Ut(T,r),y=Dt(d,r);return y||(r=$t(d,y=[e.InferredTypeKind.ANY,null],r)),[[wt(d,y)],r];case e.BKExpressionType.BIND:return Zt((x=t).value,r);case e.BKExpressionType.OBJECT:for(var S,v=[],R=0,C=(x=t).properties;R<C.length;R++){var N=C[R];S=(g=Zt(N.value,r))[0],r=g[1],v.push.apply(v,S)}return[v,r];case e.BKExpressionType.ARRAY:for(var A,v=[],O=0,L=(x=t).values;O<L.length;O++){var h=L[O];A=(M=Zt(h,r))[0],r=M[1],v.push.apply(v,A)}return[v,r];case e.BKExpressionType.NOT:var m;return U=Zt(t.value,r),m=U[0],r=U[1],[m,r];case e.BKExpressionType.IF:case e.BKExpressionType.ELSEIF:return Zt((x=t).condition,r);case e.BKExpressionType.GROUP:var x=t;return Zt(x.value,r);default:throw new Error("Unexpected expression "+t.type)}var P,I,g,M,U},er=function(t,r){for(var n,o,i,u=0,s=N(t).modifiers;u<s.length;u++){var E=s[u];E.value.type===e.BKExpressionType.IF?n=E.value:E.value.type===e.BKExpressionType.ELSEIF?o=E.value:E.value.type===e.BKExpressionType.ELSE?E.value:E.value.type===e.BKExpressionType.REPEAT&&(i=E.value)}if(n||o){var c=(n||o).condition;(y=Zt(c,r))[0],r=y[1]}if(i){var p=i.each,l=(i.asKey,i.asValue),T=void 0,f=void 0;f=(S=Zt(p,r))[0],r=S[1],f=(v=Jt(f,e.InferredTypeKind.OBJECT_OR_ARRAY,r))[0],r=v[1],T=Zt(l,r)[0];var _=kt(f[0]),d=kt(T[0])[0];r=Bt(d,_,r),r=tr(t,r)[1],r=rr(t,r)[1],r=nr(a(t),r),r=Kt(d,r)}else r=tr(t,r)[1],r=rr(t,r)[1];return r;var y,S,v},tr=function(t,r){void 0===r&&(r=Ht());for(var n=N(t),o=E(t),i=[],a=gt[n.name]||Mt,u=0,s=o.length;u<s;u++){var c=[],p=o[u],l=p.value,T=p.name;if(l){if(l.type===e.PCExpressionType.BLOCK){c=(_=Zt(l.value.value,r))[0],r=_[1];var f=a[T];f&&(c=(d=Jt(c,f,r))[0],r=d[1])}i.push.apply(i,c)}}return[i,r];var _,d},rr=function(t,r){void 0===r&&(r=Ht());N(t);for(var n=c(t),o=[],i=0,a=n.length;i<a;i++){var u=n[i],s=[];if(u.value.type===e.BKExpressionType.BIND){s=(S=Zt(u.value.value,r))[0],r=S[1];for(var E=[],p=0,l=s;p<l.length;p++){var T=l[p],f=T[0],_=T[1],d=(_[0],_[1]),y=[f,[e.InferredTypeKind.EXTENDABLE_OBJECT,d]];E.push(y),r=$t(y[0],y[1],r)}s=E}o.push.apply(o,s)}return[o,r];var S},nr=function(e,t){for(var r=0,n=e;r<n.length;r++){var o=n[r];t=Qt(o,t)}return t},or=function(e){},ir={},ar=function(e){return ir[e]?ir[e]:ir[e]=ur($(e))},ur=function(t){for(var r,n=t.curr(),o=[];!t.ended();)o.push(sr(t)),r||((r=t.curr())&&r.type!==i.WHITESPACE&&r.type!==i.COMMA&&Oe(t,i.COMMA),t.next());return 1===o.length?o[0]:{type:r.type===i.WHITESPACE?e.DcExpressionType.SPACED_LIST:e.DcExpressionType.COMMA_LIST,items:o,location:U(n,t.curr(),t.source)}},sr=function(e){switch(Ce(e),e.curr().type){case i.SINGLE_QUOTE:case i.DOUBLE_QUOTE:return W(e);case i.HASH:return Er(e);case i.NUMBER:return cr(e);case i.MINUS:return e.hasNext()&&e.peek(1).type===i.NUMBER?cr(e):lr(e);case i.TEXT:return lr(e);default:Ae(e.source,e.curr())}},Er=function(t){for(var r=t.curr(),n="";!t.ended()&&t.curr().type!==i.WHITESPACE;)n+=t.curr().value,t.next();return{type:e.DcExpressionType.COLOR,value:n,location:U(r,t.curr(),t.source)}},cr=function(t){var r=t.curr(),n=pr(t),o="";return t.ended()||t.curr().type===i.WHITESPACE||t.curr().type===i.COMMA||t.curr().type===i.PAREN_CLOSE||(o=t.curr().value,t.next()),{type:e.DcExpressionType.MEASUREMENT,value:n,unit:o,location:U(r,t.curr(),t.source)}},pr=function(e){var t=e.curr().value;return"-"===t&&(t+=e.next().value),e.next(),t},lr=function(t){var r=t.curr(),n=fr(t);return t.ended()||t.curr().type!==i.PAREN_OPEN?{type:e.DcExpressionType.KEYWORD,name:n}:{type:e.DcExpressionType.CALL,name:n,params:Tr(t),location:U(r,t.curr(),t.source)}},Tr=function(e){for(var t=[];!e.ended()&&e.curr().type!==i.PAREN_CLOSE;)e.next(),Ce(e),t.push(sr(e));return Oe(e,i.PAREN_CLOSE),e.next(),t},fr=function(e){for(var t="";!e.ended()&&e.curr().type!==i.WHITESPACE&&e.curr().type!==i.PAREN_OPEN&&e.curr().type!==i.PAREN_CLOSE;)t+=e.curr().value,e.next();return t},_r=function(t){switch(t.type){case e.DcExpressionType.SPACED_LIST:return(r=t).items.map(_r).join(" ");case e.DcExpressionType.COMMA_LIST:var r=t;return r.items.map(_r).join(", ");case e.DcExpressionType.KEYWORD:return t.name;case e.DcExpressionType.CALL:var n=t;return n.name+"("+n.params.map(_r).join(", ")+")";case e.DcExpressionType.COLOR:return t.value;case e.BKExpressionType.STRING:return JSON.stringify(t.value);case e.DcExpressionType.MEASUREMENT:var o=t;return""+o.value+o.unit;default:throw new Error("Unable to stringify CSS declaration value type "+t.type)}},dr=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MUTATED="MUTATED",t.SET_VALUE_MUTATION="SET_VALUE_MUTATION",t.INSERT_CHILD_MUTATION="INSERT_CHILD_MUTATION",t.REMOVE_CHILD_MUTATION="REMOVE_CHILD_MUTATION",t.SET_PROPERTY_MUTATION="SET_PROPERTY_MUTATION",t.REMOVE_MUTATION="REMOVE_MUTATION",t.createMutationEvent=function(e){return{type:t.MUTATED,mutation:e}},t.createSetValueMutation=function(e,t,r){return{type:e,target:t,newValue:r}},t.createInsertChildMutation=function(e,t,r,n,o){return void 0===n&&(n=Number.MAX_SAFE_INTEGER),{type:e,target:t,child:r,index:n,clone:o}},t.createRemoveChildMutation=function(e,t,r,n){return{type:e,target:t,child:r,index:n}},t.createMoveChildMutation=function(e,t,r,n,o){return{type:e,target:t,child:r,index:n,oldIndex:o}},t.createPropertyMutation=function(e,t,r,n,o,i,a){return{type:e,target:t,name:r,newValue:n,oldValue:o,oldName:i,index:a}},t.createRemoveMutation=function(e,t,r,n,o,i){return{type:e,target:t}}});r(dr);dr.MUTATED,dr.SET_VALUE_MUTATION,dr.INSERT_CHILD_MUTATION,dr.REMOVE_CHILD_MUTATION,dr.SET_PROPERTY_MUTATION,dr.REMOVE_MUTATION,dr.createMutationEvent,dr.createSetValueMutation,dr.createInsertChildMutation,dr.createRemoveChildMutation,dr.createMoveChildMutation,dr.createPropertyMutation,dr.createRemoveMutation;var yr=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.STRING_REPLACE="STRING_REPLACE",t.createStringMutation=function(e,r,n){return void 0===n&&(n=""),{startIndex:e,endIndex:r,value:n,type:t.STRING_REPLACE}},t.editString=function(e,t,r){void 0===r&&(r=[]);for(var n=e,o=r.length,i=r.concat(t),a=0,u=t.length;a<u;a++){for(var s=t[a],E=s.startIndex,c=s.endIndex,p=s.value,l=E,T=c,f=!1,_=E===c,d=a+o,y=0;y<d;y++){var S=i[y],v=S.startIndex,R=S.endIndex,C=S.value,N=v===R,A=E===v,O=c===R,L=A&&_,h=O&&_,m=A&&N,x=O&&N,P=L||h||m||x;if(v<c&&v>E&&(T-=c-v),R>E&&R<c&&(l+=R-E),(E>=v&&c<=R||E<v&&c>=R)&&!P){f=!0;break}if(v<=E&&c>v){var I=C.length-(R-v);l=Math.max(0,l+I),T=Math.max(0,T+I)}}f||(n=n.substr(0,l)+p+n.substr(T))}return n}});r(yr);yr.STRING_REPLACE,yr.createStringMutation,yr.editString;var Sr=n(function(e,t){function r(e,r,n){for(var o=[].concat(e),i=[].concat(e),a=[].concat(r),u=[],s=[],E=0,c=i.length;E<c;E++){for(var p=i[E],l=void 0,T=1/0,f=0,_=a.length;f<_;f++){var d=n(p,v=a[f]);if(~d&&d<T&&(l=v,T=d),0===T)break}null!=l&&(i.splice(E--,1),c--,a.splice(a.indexOf(l),1),s[r.indexOf(l)]=[p,l])}for(E=i.length;E--;){var p=i[E],y=e.indexOf(p);u.push(t.createArrayDeleteMutation(p,y)),o.splice(y,1)}for(var E=0,c=a.length;E<c;E++){v=a[E];s[y=r.indexOf(v)]=[void 0,v]}for(var E=0,c=s.length;E<c;E++)if(null!=s[E]){var S=s[E],p=S[0],v=S[1],R=E;if(null==p)u.push(t.createArrayInsertMutation(R,v)),o.splice(R,0,v);else{var C=o.indexOf(p);u.push(t.createArrayUpdateMutation(e.indexOf(p),C,v,R)),C!==R&&(o.splice(C,1),o.splice(R,0,p))}}return t.createArrayMutation(u)}function n(e,r,n,o){void 0===n&&(n=function(e,t){return t}),void 0===o&&(o=function(e){return e});var i=e.slice();return t.eachArrayValueMutation(r,{insert:function(e){var t=e.index,r=e.value;i.splice(t,0,o(r))},delete:function(e){var t=e.index;i.splice(t,1)},update:function(e){var t=e.patchedOldIndex,r=e.newValue,o=e.index,a=i[t],u=n(a,r);u===a&&t===o||(t!==o&&i.splice(t,1),i.splice(o,0,u))}}),i}Object.defineProperty(t,"__esModule",{value:!0}),t.ARRAY_DIFF="ARRAY_DIFF",t.ARRAY_INSERT="ARRAY_INSERT",t.ARRAY_UPDATE="ARRAY_UPDATE",t.ARRAY_DELETE="ARRAY_DELETE",t.createArrayInsertMutation=function(e,r){return{type:t.ARRAY_INSERT,index:e,value:r}},t.createArrayUpdateMutation=function(e,r,n,o){return{type:t.ARRAY_UPDATE,index:o,newValue:n,originalOldIndex:e,patchedOldIndex:r}},t.createArrayDeleteMutation=function(e,r){return{type:t.ARRAY_DELETE,value:e,index:r}},t.createArrayMutation=function(e){return{type:t.ARRAY_DIFF,mutations:e}},t.diffArray=r,t.eachArrayValueMutation=function(e,r){e.mutations.forEach(function(e){switch(e.type){case t.ARRAY_INSERT:return r.insert(e);case t.ARRAY_DELETE:return r.delete(e);case t.ARRAY_UPDATE:return r.update(e)}})},t.patchArray=n});r(Sr);Sr.ARRAY_DIFF,Sr.ARRAY_INSERT,Sr.ARRAY_UPDATE,Sr.ARRAY_DELETE,Sr.createArrayInsertMutation,Sr.createArrayUpdateMutation,Sr.createArrayDeleteMutation,Sr.createArrayMutation,Sr.diffArray,Sr.eachArrayValueMutation,Sr.patchArray;var vr=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(dr),r(yr),r(Sr)});r(vr);var Rr=vr.createStringMutation,Cr=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.PX="PX",e.PERC="%",e.VW="vw",e.VH="vh",e.CM="cm",e.EM="em",e.EX="ex",e.IN="in",e.MM="mm",e.PC="pc",e.PT="pt",e.VMIN="vmin"}(t.CSSMeasurementTypes||(t.CSSMeasurementTypes={}));!function(e){e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL"}(t.Axis||(t.Axis={}));!function(e){e[e.azimuth=0]="azimuth",e[e.borderCollapse=1]="borderCollapse",e[e.borderSpacing=2]="borderSpacing",e[e.captionSide=3]="captionSide",e[e.color=4]="color",e[e.cursor=5]="cursor",e[e.direction=6]="direction",e[e.elevation=7]="elevation",e[e.emptyCells=8]="emptyCells",e[e.fontFamily=9]="fontFamily",e[e.fontSize=10]="fontSize",e[e.fontStyle=11]="fontStyle",e[e.fontVariant=12]="fontVariant",e[e.fontWeight=13]="fontWeight",e[e.font=14]="font",e[e.letterSpacing=15]="letterSpacing",e[e.lineHeight=16]="lineHeight",e[e.listStyleImage=17]="listStyleImage",e[e.listStylePosition=18]="listStylePosition",e[e.listStyleType=19]="listStyleType",e[e.listStyle=20]="listStyle",e[e.orphans=21]="orphans",e[e.pitchRange=22]="pitchRange",e[e.pitch=23]="pitch",e[e.quotes=24]="quotes",e[e.richness=25]="richness",e[e.speakHeader=26]="speakHeader",e[e.speakNumeral=27]="speakNumeral",e[e.speakPunctuation=28]="speakPunctuation",e[e.speak=29]="speak",e[e.speechRate=30]="speechRate",e[e.stress=31]="stress",e[e.textAlign=32]="textAlign",e[e.textIndent=33]="textIndent",e[e.textDecoration=34]="textDecoration",e[e.textTransform=35]="textTransform",e[e.visibility=36]="visibility",e[e.voiceFamily=37]="voiceFamily",e[e.volume=38]="volume",e[e.whiteSpace=39]="whiteSpace",e[e.widows=40]="widows",e[e.wordSpacing=41]="wordSpacing"}(t.INHERITED_CSS_STYLE_PROPERTIES||(t.INHERITED_CSS_STYLE_PROPERTIES={}))});r(Cr);Cr.CSSMeasurementTypes,Cr.Axis,Cr.INHERITED_CSS_STYLE_PROPERTIES;var Nr=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CSS_STYLE_RULE_SET_SELECTOR_TEXT="CSS_STYLE_RULE_SET_SELECTOR_TEXT",t.CSS_STYLE_RULE_SET_STYLE="CSS_STYLE_RULE_SET_STYLE",t.CSS_STYLE_RULE_SET_STYLE_PROPERTY="CSS_STYLE_RULE_SET_STYLE_PROPERTY",t.CSS_PARENT_INSERT_RULE="CSS_PARENT_INSERT_RULE",t.CSS_PARENT_DELETE_RULE="CSS_PARENT_DELETE_RULE",t.CSS_PARENT_MOVE_RULE="CSS_PARENT_MOVE_RULE",t.CSS_INSERT_CSS_RULE_TEXT="CSS_INSERT_CSS_RULE_TEXT"});r(Nr);Nr.CSS_STYLE_RULE_SET_SELECTOR_TEXT,Nr.CSS_STYLE_RULE_SET_STYLE,Nr.CSS_STYLE_RULE_SET_STYLE_PROPERTY,Nr.CSS_PARENT_INSERT_RULE,Nr.CSS_PARENT_DELETE_RULE,Nr.CSS_PARENT_MOVE_RULE,Nr.CSS_INSERT_CSS_RULE_TEXT;var Ar=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SET_ELEMENT_ATTRIBUTE_EDIT="setElementAttributeEdit",t.ATTACH_SHADOW_ROOT_EDIT="attachShadowRootEdit",t.SET_TEXT_CONTENT="setTextContent",t.INSERT_HTML_EDIT="INSERT_HTML_EDIT",t.INSERT_CHILD_NODE_EDIT="INSERT_CHILD_NODE_EDIT",t.REMOVE_CHILD_NODE_EDIT="REMOVE_CHILD_NODE_EDIT",t.MOVE_CHILD_NODE_EDIT="MOVE_CHILD_NODE_EDIT",t.UPDATE_VALUE_NODE="UPDATE_VALUE_NODE"});r(Ar);Ar.SET_ELEMENT_ATTRIBUTE_EDIT,Ar.ATTACH_SHADOW_ROOT_EDIT,Ar.SET_TEXT_CONTENT,Ar.INSERT_HTML_EDIT,Ar.INSERT_CHILD_NODE_EDIT,Ar.REMOVE_CHILD_NODE_EDIT,Ar.MOVE_CHILD_NODE_EDIT,Ar.UPDATE_VALUE_NODE;var Or=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(Cr),r(Nr),r(Ar)});r(Or);var Lr=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(Or)});r(Lr);var hr=Lr,mr=hr.UPDATE_VALUE_NODE,xr=hr.SET_ELEMENT_ATTRIBUTE_EDIT,Pr=hr.INSERT_CHILD_NODE_EDIT,Ir=hr.REMOVE_CHILD_NODE_EDIT,gr=hr.INSERT_HTML_EDIT,Mr=(hr.CSS_INSERT_CSS_RULE_TEXT,hr.CSS_PARENT_DELETE_RULE,hr.CSS_STYLE_RULE_SET_SELECTOR_TEXT,hr.CSS_STYLE_RULE_SET_STYLE_PROPERTY,n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createInsertHTMLMutation=function(e,t,r){return{type:Ar.INSERT_HTML_EDIT,html:r,childIndex:t,target:e}}}));r(Mr);Mr.createInsertHTMLMutation;var Ur=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.insertCSSRuleText=function(e,t,r){return{type:Nr.CSS_INSERT_CSS_RULE_TEXT,target:e,childIndex:t,cssText:r}}});r(Ur);Ur.insertCSSRuleText;var Dr=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(Mr),r(Ur)});r(Dr);var Br=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(Dr)});r(Br);var Kr=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(Br)});r(Kr);var $r=Kr.createInsertHTMLMutation,br=function(e,t){return{type:"PC_REMOVE_CHILD_NODE",index:t,target:e}},Yr=function(e){return{type:"PC_REMOVE_NODE",target:e}},Vr=function(e,t){var r=V(e),n=Gr(r,t.target.location);if(!n)return[Rr(0,0,"")];switch(t.type){case mr:return Xr(n,t);case xr:return Wr(n,t);case Ir:return Hr(n,t.index);case Pr:return Fr(n,t,e);case gr:return jr(n,t,e);case"PC_REMOVE_CHILD_NODE":return Hr(n,t.index);case"PC_REMOVE_NODE":return kr(n)}return[Rr(0,0,"")]},wr=function(e,t){return e.location.start.line===t.start.line&&e.location.start.column===t.start.column&&e.location.end.line===t.end.line&&e.location.end.column===t.end.column},Gr=function(t,r){if(wr(t,r))return t;if(t.type===e.PCExpressionType.FRAGMENT||t.type===e.PCExpressionType.ELEMENT)for(var n=0,o=t.childNodes;n<o.length;n++){var i=o[n],a=Gr(i,r);if(a)return a}},Hr=function(e,t){var r=e.childNodes[t];return kr(r)},kr=function(e){return[Rr(e.location.start.pos,e.location.end.pos,"")]},Fr=function(e,t,r){var n=t.target,o=t.index,i=t.child;return jr(e,$r(n,o,i.nodeValue||i.outerHTML),r)},jr=function(t,r,n){var o=r.childIndex,i=r.html;if(t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT)return[Rr(Qr((u=t).location.end.pos-2,n),u.location.end.pos,">"+i+"</"+u.name+">")];var a=t.childNodes[o];if(!a){var u=t;return[Rr(u.startTag.location.end.pos,u.startTag.location.end.pos,i)]}return[Rr(a.location.start.pos,a.location.start.pos,i)]},Qr=function(e,t){var r=t.substr(0,e).split("").reverse().join("").match(/^([\s\r\n\t]+)/)||["",""];return e-r[1].length},Xr=function(e,t){var r=t.newValue;return[Rr(e.location.start.pos,e.location.end.pos,r)]},Wr=function(t,r){var n;t.type===e.PCExpressionType.SELF_CLOSING_ELEMENT?n=t:t.type===e.PCExpressionType.ELEMENT&&(n=t.startTag);for(var o,i=r.name,a=r.newValue&&'"'+r.newValue+'"',u=0,s=n.attributes;u<s.length;u++){var E=s[u];if(E.name===i)return o=!0,a?[Rr(E.value.location.start.pos,E.value.location.end.pos,a)]:[Rr(E.location.start.pos-1,E.location.end.pos,"")]}if(!o){var c=n.location.start.pos+n.name.length+1;return[Rr(c,c,!0===r.newValue?i:" "+i+"="+a)]}};e.getElementChildNodes=a,e.getElementTagName=u,e.getAttributeStringValue=s,e.getElementAttributes=E,e.getElementModifiers=c,e.isTag=p,e.filterPCElementsByStartTag=l,e.getElementStartTag=T,e.getPCStartTagAttribute=f,e.hasPCStartTagAttribute=_,e.getPCStyleElements=d,e.getPCLinkStyleElements=y,e.getPCCSSElements=S,e.getPCMetaTags=v,e.getPCMetaName=R,e.traversePCAST=C,e.getStartTag=N,e.getPCElementModifier=A,e.getExpressionPath=O,e.filterPCASTTree=L,e.getPCASTElementsByTagName=h,e.getPCParent=m,e.getAllChildElementNames=x,e.parseModuleSource=V,e.parseStyleSource=w,e.createString=W,e.eatWhitespace=Ce,e.throwUnexpectedToken=Ae,e.assertCurrTokenType=Oe,e.assertCurrTokenExists=Le,e.bundleVanilla=Ge,e.transpileBlockExpression=He,e.transpileStyleElement=it,e.transpileCSSSheet=Ct,e.loadModuleAST=me,e.defaultResolveModulePath=xe,e.getChildComponentInfo=Pe,e.getDependencyChildComponentInfo=Ie,e.getModuleComponent=ge,e.getUsedDependencies=Me,e.getImportDependencies=Ue,e.getComponentDependency=De,e.loadModuleDependencyGraph=Be,e.parseMetaContent=$e,e.getComponentMetadataItems=be,e.getComponentMetadataItem=Ye,e.setSymbolTableEntries=Vt,e.inferredType=Gt,e.symbolTable=Ht,e.inferRootNodeTypes=jt,e.inferNodeTypes=Qt,e.inferElementAttributeTypes=tr,e.inferElementSpreadTypes=rr,e.loadComponentTypes=or,e.parseDeclaration=ar,e.stringifyDeclarationAST=_r,e.editPaperclipSource=Vr,e.PC_REMOVE_CHILD_NODE="PC_REMOVE_CHILD_NODE",e.PC_REMOVE_NODE="PC_REMOVE_NODE",e.createPCRemoveChildNodeMutation=br,e.createPCRemoveNodeMutation=Yr,Object.defineProperty(e,"__esModule",{value:!0})});
