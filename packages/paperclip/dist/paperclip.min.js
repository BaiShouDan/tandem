var paperclip=function(e){"use strict";function t(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}const n=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var r;!function(e){e[e.STRING=0]="STRING",e[e.BLOCK=1]="BLOCK",e[e.STRING_BLOCK=2]="STRING_BLOCK",e[e.ELEMENT=3]="ELEMENT",e[e.SELF_CLOSING_ELEMENT=4]="SELF_CLOSING_ELEMENT",e[e.TEXT_NODE=5]="TEXT_NODE",e[e.COMMENT=6]="COMMENT",e[e.ATTRIBUTE=7]="ATTRIBUTE",e[e.START_TAG=8]="START_TAG",e[e.BLOCK_STRING=9]="BLOCK_STRING",e[e.FRAGMENT=10]="FRAGMENT",e[e.END_TAG=11]="END_TAG"}(r||(r={}));var u;!function(e){e[e.TYPE=0]="TYPE",e[e.ECHO=1]="ECHO",e[e.IF=2]="IF",e[e.NUMBER=3]="NUMBER",e[e.PROPERTY=4]="PROPERTY",e[e.RESERVED_KEYWORD=5]="RESERVED_KEYWORD",e[e.ELSEIF=6]="ELSEIF",e[e.NOT=7]="NOT",e[e.OPERATION=8]="OPERATION",e[e.GROUP=9]="GROUP",e[e.REFERENCE=10]="REFERENCE",e[e.ELSE=11]="ELSE",e[e.REPEAT=12]="REPEAT"}(u||(u={}));var o,a=function(e){return e.type==r.SELF_CLOSING_ELEMENT?[]:e.childNodes},i=function(e){return e.type==r.SELF_CLOSING_ELEMENT?e.name:e.startTag.name},c=function(e){return e.value.value},s=function(e){return f(e).attributes},E=function(e){return f(e).modifiers},l=function(e){return e.type===r.ELEMENT||e.type===r.ELEMENT||e.type===r.START_TAG||e.type===r.END_TAG},p=function(e,t,n){if(void 0===n&&(n=[]),!1===t(e,n))return!1;if(e.childNodes)for(var r=e,u=0,o=r.childNodes.length;u<o;u++){var a=r.childNodes[u];if(!1===p(a,t,n.concat(["childNodes",u])))return!1}},f=function(e){return e.type===r.ELEMENT?e.startTag:e},T=function(e,t){return f(e).modifiers.find(function(e){return e.type===t})},d=function(e,t){var n;return p(t,function(t,r){if(t===e)return n=r,!1}),n},v=function(e,t){var n=[];return p(e,function(e){t(e)&&n.push(e)}),n},N=function(e,t){return v(e,function(e){return e.childNodes&&e.childNodes.find(function(e){return e===t||t.type===r.START_TAG&&e.type===r.ELEMENT&&e.startTag===t})})[0]},h=function(e,t,n){return{type:e,pos:t,value:n}},_=function(e){var t=1,n=0,r={};return(e+" ").split("").forEach(function(e,u){r[u]=[n,t],"\n"===e&&(n=0,t++),n++}),r},R=function(e,t){var n="number"==typeof e?e:e.pos,r=_(t)[n];return{column:r[0],line:r[1],pos:n}},A=function(e,t,n){return{start:e.line?e:R(e,n),end:t&&t.line?t:R(n.length,n)}},S=function(){function e(e){this._target=e,this.pos=0,this.length=e.length}return e.prototype.curr=function(){return this._target[this.pos]},e.prototype.shift=function(){var e=this._target[this.pos];return this.next(),e},e.prototype.hasNext=function(){return this.pos<this.length-1},e.prototype.next=function(){return this._target[Math.min(this.pos=this.pos+1,this.length)]},e.prototype.prev=function(){return this._target[Math.max(this.pos=this.pos-1,0)]},e.prototype.ended=function(){return this.pos>=this.length},e}(),y=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.scan=function(e){for(var t="";this.pos<this.length;){var n=this._target[this.pos];if(!n.match(e))break;t+=n,this.pos++}return t},n.prototype.peek=function(e){return this._target.substr(this.pos,e)},n.prototype.take=function(e){var t=this._target.substr(this.pos,e);return this.pos+=e,t},n}(S),L=function(e){function n(t,n){var r=e.call(this,n)||this;return r.source=t,r}return t(n,e),n.prototype.peek=function(e){return void 0===e&&(e=1),this._target[this.pos+e]},n.prototype.peekUntil=function(e){for(var t=this.pos;t<this.length-1;)if(e(this._target[++t]))return this._target[t]},n.prototype.curr=function(){return e.prototype.curr.call(this)},n.prototype.next=function(){return e.prototype.next.call(this)},n}(S);!function(e){e[e.LESS_THAN=0]="LESS_THAN",e[e.LESS_THAN_OR_EQUAL=1]="LESS_THAN_OR_EQUAL",e[e.CLOSE_TAG=2]="CLOSE_TAG",e[e.GREATER_THAN=3]="GREATER_THAN",e[e.GREATER_THAN_OR_EQUAL=4]="GREATER_THAN_OR_EQUAL",e[e.COMMENT_START=5]="COMMENT_START",e[e.COMMENT_END=6]="COMMENT_END",e[e.BACKSLASH=7]="BACKSLASH",e[e.BANG=8]="BANG",e[e.AND=9]="AND",e[e.OR=10]="OR",e[e.PLUS=11]="PLUS",e[e.MINUS=12]="MINUS",e[e.STAR=13]="STAR",e[e.PERCENT=14]="PERCENT",e[e.PAREN_OPEN=15]="PAREN_OPEN",e[e.PAREN_CLOSE=16]="PAREN_CLOSE",e[e.DOUBLE_EQUALS=17]="DOUBLE_EQUALS",e[e.TRIPPLE_EQUELS=18]="TRIPPLE_EQUELS",e[e.BRACKET_OPEN=19]="BRACKET_OPEN",e[e.BRACKET_CLOSE=20]="BRACKET_CLOSE",e[e.CURLY_BRACKET_OPEN=21]="CURLY_BRACKET_OPEN",e[e.CURLY_BRACKET_CLOSE=22]="CURLY_BRACKET_CLOSE",e[e.EQUALS=23]="EQUALS",e[e.SINGLE_QUOTE=24]="SINGLE_QUOTE",e[e.DOUBLE_QUOTE=25]="DOUBLE_QUOTE",e[e.TEXT=26]="TEXT",e[e.RESERVED_KEYWORD=27]="RESERVED_KEYWORD",e[e.WHITESPACE=28]="WHITESPACE"}(o||(o={}));var O=function(e){for(var t=new y(e),n=[];!t.ended();){var r=t.curr(),u=void 0;if("<"===r)u="</"===t.peek(2)?h(o.CLOSE_TAG,t.pos,t.take(2)):"\x3c!--"===t.peek(4)?h(o.COMMENT_START,t.pos,t.take(4)):"<="===t.peek(2)?h(o.LESS_THAN_OR_EQUAL,t.pos,t.take(2)):h(o.LESS_THAN,t.pos,t.shift());else if("-"===r&&"--\x3e"===t.peek(3))u=h(o.COMMENT_END,t.pos,t.take(3));else if("&"===r&&"&&"===t.peek(2))u=h(o.AND,t.pos,t.take(2));else if("|"===r&&"||"===t.peek(2))u=h(o.OR,t.pos,t.take(2));else if(">"===r)u=">="===t.peek(2)?h(o.GREATER_THAN_OR_EQUAL,t.pos,t.take(2)):h(o.GREATER_THAN,t.pos,t.shift());else if("="===r)u="==="===t.peek(3)?h(o.TRIPPLE_EQUELS,t.pos,t.take(3)):"=="===t.peek(2)?h(o.DOUBLE_EQUALS,t.pos,t.take(2)):h(o.EQUALS,t.pos,t.shift());else if("'"===r)u=h(o.SINGLE_QUOTE,t.pos,t.shift());else if("!"===r)u=h(o.BANG,t.pos,t.shift());else if("/"===r)u=h(o.BACKSLASH,t.pos,t.shift());else if('"'===r)u=h(o.DOUBLE_QUOTE,t.pos,t.shift());else if("+"===r)u=h(o.PLUS,t.pos,t.shift());else if("-"===r)u=h(o.MINUS,t.pos,t.shift());else if("*"===r)u=h(o.STAR,t.pos,t.shift());else if("%"===r)u=h(o.PERCENT,t.pos,t.shift());else if("["===r)u=h(o.BRACKET_OPEN,t.pos,t.shift());else if("]"===r)u=h(o.BRACKET_CLOSE,t.pos,t.shift());else if("("===r)u=h(o.PAREN_OPEN,t.pos,t.shift());else if(")"===r)u=h(o.PAREN_CLOSE,t.pos,t.shift());else if("{"===r)u=h(o.CURLY_BRACKET_OPEN,t.pos,t.shift());else if("}"===r)u=h(o.CURLY_BRACKET_CLOSE,t.pos,t.shift());else if(/[\s\r\n\t]/.test(r))u=h(o.WHITESPACE,t.pos,t.scan(/[\s\r\n\t]/));else{var a=t.scan(/[^-<>,='"(){}\[\]\s\r\n\t]/)||t.shift();u=h("undefined"===a?o.RESERVED_KEYWORD:o.TEXT,t.pos,a)}n.push(u)}return new L(e,n)},$={},m=function(e){if($[e])return $[e];var t=O(e);return g(t)},g=function(e){for(var t=[];!e.ended();)t.push(C(e));return 1===t.length?t[0]:{type:r.FRAGMENT,location:A(0,e.source.length,e.source),childNodes:t}},C=function(e){switch(e.curr().type){case o.WHITESPACE:return q(e);case o.SINGLE_QUOTE:case o.DOUBLE_QUOTE:return X(e);case o.LESS_THAN:return j(e);case o.CLOSE_TAG:return Q(e);case o.COMMENT_START:return H(e);default:return F(e)?b(e):q(e)}},b=function(e){var t=e.curr();e.next(),e.next(),J(e);var n=U(e);return J(e),e.next(),e.next(),{type:r.BLOCK,location:A(t,e.curr(),e.source),value:n}},U=function(e){switch(e.curr().value){case"bind":return I(e);case"repeat":return D(e);case"if":return V(e,u.IF);case"elseif":return V(e,u.ELSEIF);case"else":return V(e,u.ELSE);case"property":return w(e,u.PROPERTY);default:throw new Error("Unknown block type "+e.curr().value)}},x=function(e){return P(e)},P=function(e){var t=G(e);J(e);var n=e.curr(),r=n.type;if(!(r===o.AND||r===o.OR||r==o.PLUS||r===o.MINUS||r===o.STAR||r===o.BACKSLASH||r===o.DOUBLE_EQUALS||r===o.TRIPPLE_EQUELS||r===o.GREATER_THAN||r===o.LESS_THAN||r===o.LESS_THAN_OR_EQUAL||r===o.GREATER_THAN_OR_EQUAL))return t;e.next(),J(e);var a=P(e);return{type:u.OPERATION,left:t,right:a,operator:n.value,location:A(t.location.start,a.location.end,e.source)}},G=function(e){switch(e.curr().type){case o.BANG:return K(e);case o.PAREN_OPEN:return M(e);case o.TEXT:return k(e);case o.RESERVED_KEYWORD:return B(e);default:throw new Error("Unknown block type "+e.curr().value)}},M=function(e){var t=e.curr();e.next();var n=x(e);return e.next(),{type:u.GROUP,value:n,location:A(t,e.curr(),e.source)}},B=function(e){var t=e.curr();return e.next(),{type:u.RESERVED_KEYWORD,value:t.value,location:A(t,e.curr(),e.source)}},I=function(e){var t=e.curr();return e.next(),e.next(),{type:u.ECHO,value:x(e),location:A(t,e.curr(),e.source)}},w=function(e,t){var n=e.curr();return e.next(),e.next(),{type:t,name:k(e).value,location:A(n,e.curr(),e.source)}},V=function(e,t){var n=e.curr();return e.next(),e.next(),{type:t,condition:x(e),location:A(n,e.curr(),e.source)}},D=function(e){var t=e.curr();e.next();var n=k(e);e.next();var r,o=k(e);return","===e.curr().value&&(e.next(),r=k(e)),{type:u.REPEAT,location:A(t,e.curr(),e.source),each:n,asKey:r,asValue:o}},k=function(e){J(e);var t=e.curr();return e.next(),J(e),{type:u.REFERENCE,value:t.value,location:A(t,e.curr(),e.source)}},K=function(e){var t=e.curr();return e.next(),{type:u.NOT,value:G(e),location:A(t,e.curr(),e.source)}},H=function(e){var t,n=e.curr(),u="";for(e.next();!e.ended()&&(t=e.curr(),e.next(),t.type!==o.COMMENT_END);)u+=t.value;return{type:r.COMMENT,value:u,location:A(n,e.curr(),e.source)}},F=function(e){return e.curr().type===o.BRACKET_OPEN&&e.peek(1).type===o.BRACKET_OPEN},Q=function(e){var t=e.curr(),n=e.next();return e.next(),e.next(),{type:r.END_TAG,name:n.value,location:A(t,e.curr(),e.source)}},j=function(e){var t=e.curr();e.next();for(var n=z(e),u=[],a=[];!e.ended();){J(e);var i=e.curr();if(i.type===o.BACKSLASH||i.type==o.GREATER_THAN)break;F(e)?a.push(b(e)):u.push(W(e))}if(e.curr().type===o.BACKSLASH)return e.next(),e.next(),{type:r.SELF_CLOSING_ELEMENT,name:n,attributes:u,modifiers:a,location:A(t,e.curr(),e.source)};e.next();var c=e.curr(),s=Y(n,e),E=s[0],l=s[1];return{type:r.ELEMENT,startTag:{name:n,type:r.START_TAG,location:A(t,c,e.source),modifiers:a,attributes:u},childNodes:E,location:A(t,e.curr(),e.source),endTag:l}},Y=function(e,t){for(var n,u=[];!t.ended();){var o=C(t);if(o.type===r.END_TAG){n=o;break}u.push(o)}return[u,n]},W=function(e){var t,n=e.curr(),u=z(e);return e.curr().type===o.EQUALS&&(e.next(),t=C(e)),{type:r.ATTRIBUTE,name:u,value:t,location:A(n,e.curr(),e.source)}},X=function(e){var t=e.curr(),n=[],u=!1;for(e.next();!e.ended();){var o=e.curr();if(o.type===t.type)break;F(e)?(u=!0,n.push(b(e))):(e.next(),n.push({type:r.STRING,value:o.value,location:A(o.pos,e.curr(),e.source)}))}e.next();var a=A(t,e.curr(),e.source);return u?{type:r.STRING_BLOCK,location:a,values:n}:{type:r.STRING,location:a,value:n.map(function(e){return e.value}).join("")}},q=function(e){var t=e.curr();e.next();for(var n=t.value;!e.ended();){var u=e.curr();if(u.type===o.LESS_THAN||u.type==o.CLOSE_TAG||F(e))break;e.next(),n+=u.value}return{type:r.TEXT_NODE,value:n,location:A(t,e.curr(),e.source)}},J=function(e){for(;e.curr().type===o.WHITESPACE;)e.next()},z=function(e){for(var t="";e.curr().type!==o.WHITESPACE&&e.curr().type!==o.GREATER_THAN&&e.curr().type!==o.EQUALS;)t+=e.curr().value,e.next();return t};!function(e){e.TANDEM="TANDEM",e.WEB="WEB"}(e.PaperclipTargetType||(e.PaperclipTargetType={}));var Z=Symbol(),ee=function(e){if(e[Z]&&e[Z][0]===e)return e[Z][1];var t=te(e);return e[Z]=[e,t],t},te=function(e){for(var t=e.type===r.FRAGMENT?e.childNodes:[e],n=[],u=[],o=[],c=[],l=0,p=t.length;l<p;l++){var f=t[l];if(f.type===r.SELF_CLOSING_ELEMENT||f.type===r.ELEMENT){var T=f,d=i(T),v=a(T),N=s(T),h=E(T);if("component"===d){u.push(ne(h,N,v));continue}if("link"===d){n.push(ue(N));continue}if("style"===d){o.push(oe(N,v));continue}}c.push(f)}return{source:e,imports:n,components:u,globalStyles:o,unhandledExpressions:c}},ne=function(e,t,n){for(var o,E,l,p=e.map(function(e){return e.value}).filter(function(e){return e.type===u.PROPERTY}),f=0,T=t.length;f<T;f++){var d=t[f];"id"===d.name&&(o=c(d))}for(var f=0,T=n.length;f<T;f++){var v=n[f];if(v.type===r.SELF_CLOSING_ELEMENT||v.type===r.ELEMENT){var N=v,h=i(N),_=s(N),R=a(N);"style"===h?E=oe(_,R):"template"===h&&(l=re(_,R))}}return{id:o,style:E,properties:p,template:l}},re=function(e,t){return{content:t}},ue=function(e){for(var t,n,r=0,u=e.length;r<u;r++){var o=e[r];"href"===o.name?t=c(o):"type"===o.name&&(n=c(o))}return{type:n,href:t}},oe=function(e,t){return{content:t[0].value}},ae=function(e,t){return ce(e,t).then(function(t){return{code:Ee(e,t)}})},ie=function(e,t){switch(e.type){case u.NOT:return"!"+ie(e.value,t);case u.REFERENCE:var n=e.value;return t?t+"."+n:n;case u.GROUP:return"("+ie(e.value,t)+")";case u.RESERVED_KEYWORD:return e.value;case u.OPERATION:var r=e,o=r.left,a=r.operator,i=r.right;return ie(o,t)+" "+a+" "+ie(i,t);default:throw new Error("Unable to transpile BK block "+e.type)}},ce=function(e,t,n){return void 0===n&&(n={}),t.io.readFile(e).then(m).then(ee).then(function(t){return n[e]=t,n})},se=function(e){return e.replace(/[\d-]+/g,"_")},Ee=function(e,t){var n="((window) => {";n+="const document = window.document;const $$each = (object, iterator) => {if (Array.isArray(object)) {object.forEach(iterator);} else {for (const key in object) {iterator(object[key], key);}}};const $$count = (object) => {return Array.isArray(object) ? object.length : Object.keys(object).length;};const $$defineModule = (deps, run) => {let exports;return () => {if (exports) return exports;exports = {};return exports = run((dep) => $$modules[deps[dep]]());}};let updating = false;let toUpdate = [];const $$requestUpdate = (object) => {if (toUpdate.indexOf(object) === -1) {toUpdate.push(object);}if (updating) {return;}updating = true;requestAnimationFrame(function() {for(let i = 0; i < toUpdate.length; i++) {const target = toUpdate[i];target.update();}toUpdate = [];updating = false;});};",n+="$$modules = {};";for(var r in t)n+='$$modules["'+r+'"] = '+le(t[r])+";";return n+='return {entryPath: "'+e+'",modules: $$modules};})(window)'},le=function(e){var t=e.source,n=(e.imports,e.globalStyles,e.components),r=e.unhandledExpressions,u={varCount:0,root:t},o="$$defineModule({}, (require) => {";o+="$$strays = [];";for(var a=Oe(r,u),i=0,c=a.length;i<c;i++){var s=a[i];o+=s.content,o+=s.bindings.map(pe).join("\n"),o+="if ("+s.varName+".nodeType != null) {\n",o+="  $$strays.push("+s.varName+");\n",o+="}\n;"}for(var i=0,c=n.length;i<c;i++)o+=Te(n[i],u).content;return o+="return {strays: $$strays};",o+="})"},pe=function(e){return"(() => {"+e+"} )();\n"},fe=function(e){return"(() => { const binding = () => { "+e+" }; binding(); return binding; })()"},Te=function(e,t){var r=e.id,u=(e.style,e.template),o=e.properties,a=ge(se(r),t),i=n({},t,{varCount:0,contextName:"this"});return{varName:a,bindings:[],content:"class "+a+" extends HTMLElement {constructor() {super();this.$$bindings = [];}connectedCallback() {this.render();}"+o.map(function(e){var t=e.name;return"get "+t+"() {return this.$$"+t+";}set "+t+"(value) {if (this.$$"+t+" === value) {return;}const oldValue = this.$"+t+";this.$$"+t+" = value;if (this._rendered) {$$requestUpdate(this);}}"}).join("\n")+'render() {if (this._rendered) {return;}this._rendered = true;const shadow = this.attachShadow({ mode: "open" });'+o.map(function(e){var t=e.name,n=e.defaultValue;return"\n            if (this.$$"+t+" == null) {\n              this.$$"+t+" = "+(n||'this.getAttribute("'+t+'");')+"\n            }\n          "}).join("\n")+"let $$bindings = [];"+(u?u.content.map(function(e){var t=de(e,i);return e?t.content+(t.bindings.length?"$$bindings = $$bindings.concat("+t.bindings.map(fe)+");":"")+"shadow.appendChild("+t.varName+");":""}).join(""):"")+"this.$$bindings = $$bindings;}cloneShallow() {const clone = super.cloneShallow();clone._rendered = true;return clone;}static get observedAttributes() {return "+JSON.stringify(o.map(function(e){return e.name}))+";}attributeChangedCallback(name, oldValue, newValue) {if (super.attributeChangedCallback) {super.attributeChangedCallback(name, oldValue, newValue);}this[name] = newValue;}update() {if (!this._rendered) {return;}let bindings = this.$$bindings || [];"+ye("bindings")+'}}customElements.define("'+r+'", '+a+");"}},de=function(e,t){switch(e.type){case r.FRAGMENT:return ve(e,t);case r.TEXT_NODE:return Ne(e,t);case r.BLOCK:return he(e,t);case r.ELEMENT:return Le(e,t);case r.SELF_CLOSING_ELEMENT:return _e(e,t)}return null},ve=function(e,t){return Ce('document.createDocumentFragment("")',t)},Ne=function(e,t){return Ce("document.createTextNode("+JSON.stringify(e.value.replace(/[\s\r\n\t]+/g," "))+")",t)},he=function(e,t){var n=Ce('document.createTextNode("")',t),r=n.varName+"$$currentValue";return n.content+="let "+r+";",n.bindings.push(Se(r,ie(e.value.value,t.contextName),function(e){return n.varName+".nodeValue = "+e},t)),n},_e=function(e,t){return Re(e,Ae(e,t),t)},Re=function(e,t,n){if(!e.modifiers.length)return t;for(var o,a,i,c,s=e.modifiers,E=t,l=0,p=s.length;l<p;l++){var f=s[l].value;f.type===u.IF?o=f:f.type===u.ELSE?a=f:f.type===u.ELSEIF?i=f:f.type===u.REPEAT&&(c=f)}if(c){var v=c.each.value,h=c.asKey,_=(void 0===h?{value:"index"}:h).value,R=c.asValue.value,A=be(n),S=A.fragment,y=A.start,L=A.end,O=(E=S).varName+"$$currentValue",$=E.varName+"$$childBindings";E.content+="\n      let "+O+" = [];\n      let "+$+" = [];\n    ",E.bindings.push("let $$newValue = ("+v+") || [];if ($$newValue === "+O+") {return;}const $$oldValue = "+O+";"+O+" = $$newValue;const $$parent = "+y.varName+".parentNode;const $$startIndex = Array.prototype.indexOf.call($$parent.childNodes, "+y.varName+"); const $$newValueCount = $$count($$newValue);const $$oldValueCount = $$count($$oldValue);if ($$newValueCount > $$oldValueCount) {for (let $$i = $$newValueCount - $$oldValueCount; $$i--;) {"+t.content+"$$parent.insertBefore("+t.varName+", "+L.varName+");const $$bindings = ["+t.bindings.map(function(e){return"("+R+", "+_+") => { "+e+"}"}).join(",")+"];"+$+".push(($$newValue, $$newKey) => {"+ye("$$bindings","$$newValue, $$newKey")+"});}} else if ($$oldValue.length < $$newValue.length) {}let i = 0;$$each($$newValue, (value, k) => {"+$+"[i++](value, k);});"),t=E}if(o||i||a){for(var m=(o||i||a).condition,g=n.root===e||n.root.startTag===e?[n.root]:N(n.root,e).childNodes,C=g.findIndex(function(t){return t===e||e.type===r.START_TAG&&t.type===r.ELEMENT&&t.startTag===e}),b=void 0,l=C+1;l--;){var U=g[l];if(T(U,u.IF)){b="condition_"+d(U,n.root).join("");break}}var x=be(n),S=x.fragment,y=x.start,L=x.end,P=(E=S).varName+"$$bindings",O=E.varName+"$$currentValue";S.content+="let "+P+" = [];let "+O+" = false;",o&&(S.content+="let "+b+" = Infinity;"),E.bindings.push("const newValue = Boolean("+(m?ie(m):"true")+") && "+b+" >= "+C+";if (newValue) {"+b+" = "+C+";} else if ("+b+" === "+C+") {"+b+" = Infinity;}if (newValue && newValue === "+O+") {if ("+O+") {"+ye(P)+"}return;}"+O+" = newValue;"+P+" = [];if (newValue) {const elementFragment = document.createDocumentFragment();"+t.content+(t.bindings.length?P+" = "+P+".concat("+t.bindings.map(fe)+")":"")+"elementFragment.appendChild("+t.varName+");"+L.varName+".parentNode.insertBefore(elementFragment, "+L.varName+");} else {let curr = "+y.varName+".nextSibling;while(curr !== "+L.varName+") {curr.parentNode.removeChild(curr);curr = "+y.varName+".nextSibling;}}")}return E},Ae=function(e,t){for(var n=Ce('document.createElement("'+e.name+'")',t),u=0,o=e.attributes.length;u<o;u++)!function(u,o){var a=e.attributes[u],i=a.name,c=a.value,s=se(i);if(c){if(c.type===r.STRING){var E=c;n.content+=n.varName+'.setAttribute("'+i+'", '+JSON.stringify(E.value)+");\n"}else if(c.type===r.STRING_BLOCK||c.type===r.BLOCK){var l=n.varName+"$$"+s+"$$currentValue";n.content+="let "+l+";\n";var p=void 0;p=c.type===r.STRING_BLOCK?Se(l,c.values.map(function(e){return e.type===r.BLOCK?ie(e.value.value,t.contextName):JSON.stringify(e.value)}).join(" + "),function(e){return n.varName+'.setAttribute("'+i+'", '+e+")"},t):Se(l,ie(c.value.value,t.contextName),function(e){return n.varName+"."+s+" = "+e},t),n.bindings.push(p)}}else n.content+=n.varName+"."+i+" = true;\n"}(u);return n},Se=function(e,t,n,r){return"let $$newValue = "+t+";if ($$newValue !== "+e+") {"+n(e+" = $$newValue")+"}"},ye=function(e,t){return void 0===t&&(t=""),"for (let i = 0, n = "+e+".length; i < n; i++) {"+e+"[i]("+t+");}"},Le=function(e,t){switch(e.startTag.name){case"component":return null;default:return Re(e.startTag,$e(e,t),t)}},Oe=function(e,t){for(var n=[],u=0,o=e.length;u<o;u++){var a=e[u];if(a.type===r.TEXT_NODE&&/^[[\s\r\n\t]$/.test(a.value)&&u>0&&u<o-1){var i=e[u-1],c=e[u+1];if(l(i)&&l(c))continue}var s=de(a,t);s&&n.push(s)}return n},$e=function(e,t){for(var n=Ae(e.startTag,t),r=Oe(e.childNodes,t),u=0,o=r.length;u<o;u++){var a=r[u];n.content+=a.content,n.content+=n.varName+".appendChild("+a.varName+");\n",(i=n.bindings).push.apply(i,a.bindings)}return n;var i},me=function(e,t,n){var r=ge(e,n);return{varName:r,bindings:[],content:t?"let "+r+" = "+t+";\n":"let "+r+";\n"}},ge=function(e,t){return e+"_"+t.varCount++},Ce=function(e,t){return me("node",e,t)},be=function(e){var t=Ce('document.createDocumentFragment("")',e),n=Ce('document.createTextNode("")',e),r=Ce('document.createTextNode("")',e);return t.content+=n.content+""+r.content+t.varName+".appendChild("+n.varName+");"+t.varName+".appendChild("+r.varName+");",{fragment:t,start:n,end:r}};return e.parseModule=m,e.transpileToVanilla=ae,e.transpileBlockExpression=ie,e.loadAST=ee,e}({});
